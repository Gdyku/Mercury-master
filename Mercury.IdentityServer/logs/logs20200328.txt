2020-03-28 07:53:35.259 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 07:53:35.290 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 07:53:35.292 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 07:53:35.309 +01:00 [DBG] Processing signout request for anonymous
2020-03-28 07:53:35.318 +01:00 [DBG] Start end session request validation
2020-03-28 07:53:35.325 +01:00 [DBG] Start identity token validation
2020-03-28 07:53:35.330 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:53:35.330 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 07:53:35.376 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 07:53:35.377 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585345737,"exp":1585346037,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"09baefb6e72a4166bb48cdbaa2af990e","iat":1585345737,"at_hash":"lTQ7gPI4-L8LVLnA4dfJig","s_hash":"2ahEOM2z_TS4_Yrr9jxt9A","sid":"lEJ0xReyXzzLh_giALjLAQ","sub":"test2@test.com","auth_time":1585345114,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 07:53:35.382 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"unknown","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 07:53:35.383 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 07:53:38.455 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:53:38.455 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:53:38.455 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:53:38.455 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:53:38.455 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:53:38.455 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:53:38.455 +01:00 [DBG] Start discovery request
2020-03-28 07:53:38.470 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 07:53:38.472 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 07:53:38.472 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 07:53:38.472 +01:00 [DBG] Start authorize request
2020-03-28 07:53:38.472 +01:00 [DBG] No user present in authorize request
2020-03-28 07:53:38.472 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 07:53:38.481 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:53:38.481 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 07:53:38.481 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"c089d83099ec45e6b81870f07fff4c7c","UiLocales":null,"Nonce":"c8342b3280824a5687d793cdea31a108","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"c089d83099ec45e6b81870f07fff4c7c","nonce":"c8342b3280824a5687d793cdea31a108"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 07:53:38.481 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 07:53:43.058 +01:00 [DBG] Augmenting SignInContext
2020-03-28 07:53:43.060 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 07:53:43.060 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 07:53:43.083 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 07:53:43.084 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 07:53:43.084 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 07:53:43.086 +01:00 [DBG] Start authorize callback request
2020-03-28 07:53:43.089 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 07:53:43.090 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 07:53:43.090 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:53:43.090 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 07:53:43.090 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"c089d83099ec45e6b81870f07fff4c7c","UiLocales":null,"Nonce":"c8342b3280824a5687d793cdea31a108","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"WOLzCCPGTjX01E5KqDoTTA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"c089d83099ec45e6b81870f07fff4c7c","nonce":"c8342b3280824a5687d793cdea31a108"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 07:53:43.093 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 07:53:43.093 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 07:53:43.093 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 07:53:43.093 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 07:53:43.098 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 07:53:43.098 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 07:53:43.099 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"c089d83099ec45e6b81870f07fff4c7c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 07:53:43.102 +01:00 [DBG] Augmenting SignInContext
2020-03-28 07:53:44.248 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:53:44.248 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:53:44.248 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:53:44.248 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:53:44.248 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:53:44.248 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:53:44.248 +01:00 [DBG] Start discovery request
2020-03-28 07:53:44.283 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 07:53:44.283 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:53:44.283 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:53:44.284 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 07:53:44.284 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 07:53:44.284 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 07:53:44.284 +01:00 [DBG] Start key discovery request
2020-03-28 07:53:44.329 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 07:53:44.329 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:53:44.329 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:53:44.329 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 07:53:44.329 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 07:53:44.329 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 07:53:44.329 +01:00 [DBG] Start userinfo request
2020-03-28 07:53:44.329 +01:00 [DBG] Bearer token found in header
2020-03-28 07:53:44.330 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:53:44.330 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:53:44.334 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 07:53:44.335 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585378423,"exp":1585382023,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585378423,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 07:53:44.341 +01:00 [DBG] Creating userinfo response
2020-03-28 07:53:44.341 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 07:53:44.341 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 07:53:44.341 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 07:53:44.341 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 07:53:44.344 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 07:53:44.344 +01:00 [DBG] End userinfo request
2020-03-28 07:53:44.356 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:53:44.356 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:53:44.356 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:53:44.356 +01:00 [DBG] Rendering check session result
2020-03-28 07:54:37.037 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:54:37.039 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:54:37.039 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:54:37.043 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:54:37.044 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:54:37.044 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:54:37.044 +01:00 [DBG] Start discovery request
2020-03-28 07:54:37.072 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:54:37.073 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:54:37.073 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:54:37.073 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:54:37.073 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:54:37.073 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:54:37.073 +01:00 [DBG] Start discovery request
2020-03-28 07:54:37.116 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 07:54:37.116 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:54:37.117 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:54:37.117 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:54:37.117 +01:00 [DBG] Rendering check session result
2020-03-28 07:54:37.120 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 07:54:37.120 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 07:54:37.120 +01:00 [DBG] Start authorize request
2020-03-28 07:54:37.120 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 07:54:37.120 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 07:54:37.120 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:54:37.144 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 07:54:37.144 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"07e9717aaf9049d7a8a99c18afedf1bc","UiLocales":null,"Nonce":"5b8d074cac9442aaaac18cc649ed6ae8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"WOLzCCPGTjX01E5KqDoTTA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"07e9717aaf9049d7a8a99c18afedf1bc","nonce":"5b8d074cac9442aaaac18cc649ed6ae8"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 07:54:37.148 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 07:54:37.148 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 07:54:37.148 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 07:54:37.148 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 07:54:37.152 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 07:54:37.152 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 07:54:37.154 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"07e9717aaf9049d7a8a99c18afedf1bc","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 07:54:37.810 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:54:37.811 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:54:37.811 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:54:37.811 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:54:37.811 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:54:37.811 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:54:37.811 +01:00 [DBG] Start discovery request
2020-03-28 07:54:37.888 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:54:37.888 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:54:37.888 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:54:37.888 +01:00 [DBG] Rendering check session result
2020-03-28 07:54:52.350 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:54:52.350 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:54:52.350 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:54:52.352 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:54:52.352 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:54:52.352 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:54:52.352 +01:00 [DBG] Start discovery request
2020-03-28 07:54:52.425 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:54:52.425 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:54:52.425 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:54:52.425 +01:00 [DBG] Rendering check session result
2020-03-28 07:54:56.260 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:54:56.260 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:54:56.260 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:54:56.261 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:54:56.261 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:54:56.261 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:54:56.261 +01:00 [DBG] Start discovery request
2020-03-28 07:54:56.379 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:54:56.379 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:54:56.380 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:54:56.380 +01:00 [DBG] Rendering check session result
2020-03-28 07:55:43.771 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:55:43.771 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:55:43.772 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:55:43.772 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:55:43.772 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:55:43.772 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:55:43.772 +01:00 [DBG] Start discovery request
2020-03-28 07:55:43.893 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:55:43.893 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:55:43.894 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:55:43.894 +01:00 [DBG] Rendering check session result
2020-03-28 07:55:47.953 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:55:47.953 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:55:47.953 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:55:47.954 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:55:47.954 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:55:47.954 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:55:47.954 +01:00 [DBG] Start discovery request
2020-03-28 07:55:48.065 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:55:48.065 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:55:48.065 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:55:48.065 +01:00 [DBG] Rendering check session result
2020-03-28 07:55:51.775 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:55:51.775 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:55:51.775 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:55:51.775 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:55:51.775 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:55:51.775 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:55:51.775 +01:00 [DBG] Start discovery request
2020-03-28 07:55:51.867 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:55:51.867 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:55:51.868 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:55:51.868 +01:00 [DBG] Rendering check session result
2020-03-28 07:57:24.950 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:57:24.951 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:57:24.951 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:57:24.951 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:57:24.951 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:57:24.951 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:57:24.953 +01:00 [DBG] Start discovery request
2020-03-28 07:57:24.964 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:57:24.964 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:57:24.968 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:57:24.969 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:57:24.969 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:57:24.969 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:57:24.969 +01:00 [DBG] Start discovery request
2020-03-28 07:57:25.011 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 07:57:25.012 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 07:57:25.012 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 07:57:25.012 +01:00 [DBG] Start authorize request
2020-03-28 07:57:25.013 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 07:57:25.013 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 07:57:25.013 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:57:25.013 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 07:57:25.014 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"2424d15976ac4fc2a137c6c2901bc05b","UiLocales":null,"Nonce":"771a7b4db8f8445d9ae240d958d966e8","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"WOLzCCPGTjX01E5KqDoTTA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"2424d15976ac4fc2a137c6c2901bc05b","nonce":"771a7b4db8f8445d9ae240d958d966e8"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 07:57:25.014 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:57:25.014 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:57:25.014 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:57:25.014 +01:00 [DBG] Rendering check session result
2020-03-28 07:57:25.025 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 07:57:25.025 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 07:57:25.025 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 07:57:25.025 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 07:57:25.042 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 07:57:25.042 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 07:57:25.043 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"2424d15976ac4fc2a137c6c2901bc05b","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 07:57:25.589 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:57:25.589 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:57:25.589 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:57:25.589 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:57:25.589 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:57:25.589 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:57:25.589 +01:00 [DBG] Start discovery request
2020-03-28 07:57:25.672 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:57:25.673 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:57:25.673 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:57:25.673 +01:00 [DBG] Rendering check session result
2020-03-28 07:58:27.790 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:58:27.790 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:58:27.790 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:58:27.792 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:58:27.792 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:58:27.795 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:58:27.796 +01:00 [DBG] Start discovery request
2020-03-28 07:58:27.813 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:58:27.813 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:58:27.813 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:58:27.813 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:58:27.813 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:58:27.813 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:58:27.813 +01:00 [DBG] Start discovery request
2020-03-28 07:58:27.867 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 07:58:27.868 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 07:58:27.868 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 07:58:27.868 +01:00 [DBG] Start authorize request
2020-03-28 07:58:27.869 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 07:58:27.869 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 07:58:27.869 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 07:58:27.869 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:58:27.869 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:58:27.869 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:58:27.869 +01:00 [DBG] Rendering check session result
2020-03-28 07:58:27.872 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 07:58:27.873 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"dde63fb8f4b140d4bb416c8447aa3faa","UiLocales":null,"Nonce":"d42e912d2b914f569d581c1324ef2022","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"WOLzCCPGTjX01E5KqDoTTA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"dde63fb8f4b140d4bb416c8447aa3faa","nonce":"d42e912d2b914f569d581c1324ef2022"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 07:58:27.878 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 07:58:27.879 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 07:58:27.879 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 07:58:27.879 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 07:58:27.887 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 07:58:27.887 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 07:58:27.889 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"dde63fb8f4b140d4bb416c8447aa3faa","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 07:58:28.412 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:58:28.412 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:58:28.412 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:58:28.412 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:58:28.412 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:58:28.412 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:58:28.412 +01:00 [DBG] Start discovery request
2020-03-28 07:58:28.510 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:58:28.510 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:58:28.510 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:58:28.510 +01:00 [DBG] Rendering check session result
2020-03-28 07:58:44.122 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:58:44.122 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:58:44.122 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:58:44.122 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:58:44.122 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:58:44.122 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:58:44.122 +01:00 [DBG] Start discovery request
2020-03-28 07:58:44.209 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:58:44.209 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:58:44.209 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:58:44.209 +01:00 [DBG] Rendering check session result
2020-03-28 07:58:57.411 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 07:58:57.411 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 07:58:57.411 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 07:58:57.411 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 07:58:57.411 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 07:58:57.411 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 07:58:57.412 +01:00 [DBG] Start discovery request
2020-03-28 07:58:57.504 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 07:58:57.504 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 07:58:57.504 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 07:58:57.504 +01:00 [DBG] Rendering check session result
2020-03-28 13:10:26.232 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:10:26.241 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:26.242 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:26.254 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:10:26.256 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:10:26.257 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:10:26.257 +01:00 [DBG] Start discovery request
2020-03-28 13:10:26.342 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:10:26.342 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:10:26.342 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:10:26.342 +01:00 [DBG] Rendering check session result
2020-03-28 13:10:26.403 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:10:26.415 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:10:26.415 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:10:26.415 +01:00 [DBG] Start authorize request
2020-03-28 13:10:26.416 +01:00 [DBG] No user present in authorize request
2020-03-28 13:10:26.417 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:10:26.418 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:26.429 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:10:26.432 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"884fd70edeb94e8ebcb3f673616cc546","UiLocales":null,"Nonce":"ee4adc46d5b54c708f318430cf10bb05","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"884fd70edeb94e8ebcb3f673616cc546","nonce":"ee4adc46d5b54c708f318430cf10bb05","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:26.433 +01:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2020-03-28 13:10:26.462 +01:00 [INF] {"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"884fd70edeb94e8ebcb3f673616cc546","UiLocales":null,"Nonce":"ee4adc46d5b54c708f318430cf10bb05","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"884fd70edeb94e8ebcb3f673616cc546","nonce":"ee4adc46d5b54c708f318430cf10bb05","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:28.130 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:10:28.130 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:28.130 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:28.131 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:10:28.131 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:10:28.131 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:10:28.131 +01:00 [DBG] Start discovery request
2020-03-28 13:10:28.206 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:10:28.206 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:10:28.206 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:10:28.206 +01:00 [DBG] Rendering check session result
2020-03-28 13:10:28.425 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:10:28.425 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:10:28.425 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:10:28.425 +01:00 [DBG] Start authorize request
2020-03-28 13:10:28.425 +01:00 [DBG] No user present in authorize request
2020-03-28 13:10:28.425 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:10:28.426 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:28.427 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:10:28.427 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"eb939ea8f7a847eebbe57367a1bab58a","UiLocales":null,"Nonce":"9a42e52105e442e1a685d2ca0e7d7060","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"eb939ea8f7a847eebbe57367a1bab58a","nonce":"9a42e52105e442e1a685d2ca0e7d7060","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:28.427 +01:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2020-03-28 13:10:28.429 +01:00 [INF] {"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"eb939ea8f7a847eebbe57367a1bab58a","UiLocales":null,"Nonce":"9a42e52105e442e1a685d2ca0e7d7060","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"eb939ea8f7a847eebbe57367a1bab58a","nonce":"9a42e52105e442e1a685d2ca0e7d7060","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:28.953 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:10:28.953 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:28.953 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:28.955 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:10:28.955 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:10:28.955 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:10:28.955 +01:00 [DBG] Start discovery request
2020-03-28 13:10:29.045 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:10:29.045 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:10:29.045 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:10:29.045 +01:00 [DBG] Rendering check session result
2020-03-28 13:10:29.119 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:10:29.120 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:10:29.120 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:10:29.120 +01:00 [DBG] Start authorize request
2020-03-28 13:10:29.120 +01:00 [DBG] No user present in authorize request
2020-03-28 13:10:29.120 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:10:29.120 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:29.120 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:10:29.120 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"f7450d58788f482cacaf73df380e55fe","UiLocales":null,"Nonce":"ab88a6ab10a04f048b18015eb531f96f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"f7450d58788f482cacaf73df380e55fe","nonce":"ab88a6ab10a04f048b18015eb531f96f","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:29.120 +01:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2020-03-28 13:10:29.121 +01:00 [INF] {"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"f7450d58788f482cacaf73df380e55fe","UiLocales":null,"Nonce":"ab88a6ab10a04f048b18015eb531f96f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"f7450d58788f482cacaf73df380e55fe","nonce":"ab88a6ab10a04f048b18015eb531f96f","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:36.818 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 13:10:36.825 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 13:10:36.825 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 13:10:36.828 +01:00 [DBG] Processing signout request for anonymous
2020-03-28 13:10:36.829 +01:00 [DBG] Start end session request validation
2020-03-28 13:10:36.830 +01:00 [DBG] Start identity token validation
2020-03-28 13:10:36.840 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:36.840 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 13:10:36.975 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 13:10:36.976 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585378423,"exp":1585378723,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"c8342b3280824a5687d793cdea31a108","iat":1585378423,"at_hash":"YRpxTKKTgtXtPQ0HVuMn6A","s_hash":"KjBuq-iwCRGt6MyFGSuMmg","sid":"WOLzCCPGTjX01E5KqDoTTA","sub":"test2@test.com","auth_time":1585378423,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 13:10:36.976 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"unknown","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 13:10:36.977 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 13:10:40.379 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:10:40.379 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:40.379 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:40.379 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:10:40.379 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:10:40.379 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:10:40.379 +01:00 [DBG] Start discovery request
2020-03-28 13:10:40.400 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:10:40.400 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:10:40.400 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:10:40.400 +01:00 [DBG] Start authorize request
2020-03-28 13:10:40.400 +01:00 [DBG] No user present in authorize request
2020-03-28 13:10:40.400 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:10:40.400 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:40.402 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:10:40.402 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"19f9cf4a27844d159700c2b629f62e46","UiLocales":null,"Nonce":"d21ec999500c4c0b9e550c3ad67424b9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"19f9cf4a27844d159700c2b629f62e46","nonce":"d21ec999500c4c0b9e550c3ad67424b9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:40.402 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 13:10:44.350 +01:00 [DBG] Augmenting SignInContext
2020-03-28 13:10:44.350 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 13:10:44.350 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 13:10:44.358 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 13:10:44.358 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 13:10:44.358 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 13:10:44.358 +01:00 [DBG] Start authorize callback request
2020-03-28 13:10:44.359 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:10:44.359 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:10:44.359 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:44.360 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:10:44.360 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"19f9cf4a27844d159700c2b629f62e46","UiLocales":null,"Nonce":"d21ec999500c4c0b9e550c3ad67424b9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"19f9cf4a27844d159700c2b629f62e46","nonce":"d21ec999500c4c0b9e550c3ad67424b9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:10:44.365 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:10:44.365 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:10:44.365 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:10:44.365 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:10:44.370 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:10:44.370 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:10:44.372 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"19f9cf4a27844d159700c2b629f62e46","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:10:44.372 +01:00 [DBG] Augmenting SignInContext
2020-03-28 13:10:45.423 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:10:45.423 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:45.423 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:45.424 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:10:45.424 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:10:45.424 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:10:45.424 +01:00 [DBG] Start discovery request
2020-03-28 13:10:45.495 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 13:10:45.495 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:45.495 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:45.495 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 13:10:45.495 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 13:10:45.495 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 13:10:45.496 +01:00 [DBG] Start key discovery request
2020-03-28 13:10:45.534 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 13:10:45.534 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:10:45.534 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:10:45.535 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 13:10:45.537 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 13:10:45.537 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 13:10:45.537 +01:00 [DBG] Start userinfo request
2020-03-28 13:10:45.538 +01:00 [DBG] Bearer token found in header
2020-03-28 13:10:45.539 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:45.539 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:10:45.542 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 13:10:45.542 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585397444,"exp":1585401044,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585397444,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 13:10:45.546 +01:00 [DBG] Creating userinfo response
2020-03-28 13:10:45.546 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 13:10:45.546 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 13:10:45.546 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 13:10:45.546 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 13:10:45.549 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 13:10:45.549 +01:00 [DBG] End userinfo request
2020-03-28 13:10:45.556 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:10:45.556 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:10:45.556 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:10:45.556 +01:00 [DBG] Rendering check session result
2020-03-28 13:11:09.889 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:11:09.890 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:11:09.890 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:11:09.892 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:11:09.892 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:11:09.892 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:11:09.892 +01:00 [DBG] Start discovery request
2020-03-28 13:11:09.900 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:11:09.900 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:11:09.900 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:11:09.900 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:11:09.900 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:11:09.900 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:11:09.900 +01:00 [DBG] Start discovery request
2020-03-28 13:11:09.947 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:11:09.947 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:11:09.947 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:11:09.947 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:11:09.947 +01:00 [DBG] Rendering check session result
2020-03-28 13:11:09.947 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:11:09.947 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:11:09.947 +01:00 [DBG] Start authorize request
2020-03-28 13:11:09.947 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:11:09.947 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:11:09.947 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:11:09.948 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:11:09.948 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"47c4d6ba29e941f5806f9cf11222e959","UiLocales":null,"Nonce":"cc4bb9838572427784a6321c6f1c215a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"47c4d6ba29e941f5806f9cf11222e959","nonce":"cc4bb9838572427784a6321c6f1c215a"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:11:09.954 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:11:09.954 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:11:09.954 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:11:09.954 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:11:09.960 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:11:09.961 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:11:09.964 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"47c4d6ba29e941f5806f9cf11222e959","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:11:10.521 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:11:10.521 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:11:10.521 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:11:10.522 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:11:10.522 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:11:10.522 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:11:10.522 +01:00 [DBG] Start discovery request
2020-03-28 13:11:10.609 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:11:10.609 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:11:10.610 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:11:10.610 +01:00 [DBG] Rendering check session result
2020-03-28 13:11:49.346 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:11:49.346 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:11:49.346 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:11:49.346 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:11:49.346 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:11:49.346 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:11:49.346 +01:00 [DBG] Start discovery request
2020-03-28 13:11:49.466 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:11:49.466 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:11:49.466 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:11:49.466 +01:00 [DBG] Rendering check session result
2020-03-28 13:11:59.042 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:11:59.042 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:11:59.042 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:11:59.043 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:11:59.043 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:11:59.043 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:11:59.043 +01:00 [DBG] Start discovery request
2020-03-28 13:11:59.171 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:11:59.171 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:11:59.172 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:11:59.172 +01:00 [DBG] Rendering check session result
2020-03-28 13:12:07.654 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:12:07.654 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:12:07.654 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:12:07.655 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:12:07.655 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:12:07.655 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:12:07.655 +01:00 [DBG] Start discovery request
2020-03-28 13:12:07.755 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:12:07.755 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:12:07.755 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:12:07.755 +01:00 [DBG] Rendering check session result
2020-03-28 13:12:50.360 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:12:50.361 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:12:50.361 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:12:50.361 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:12:50.363 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:12:50.364 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:12:50.364 +01:00 [DBG] Start discovery request
2020-03-28 13:12:50.375 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:12:50.375 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:12:50.375 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:12:50.375 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:12:50.375 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:12:50.375 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:12:50.375 +01:00 [DBG] Start discovery request
2020-03-28 13:12:50.414 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:12:50.414 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:12:50.414 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:12:50.414 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:12:50.415 +01:00 [DBG] Rendering check session result
2020-03-28 13:12:50.415 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:12:50.415 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:12:50.415 +01:00 [DBG] Start authorize request
2020-03-28 13:12:50.415 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:12:50.416 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:12:50.416 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:12:50.421 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:12:50.422 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"1018c7c6c5a04f318b6276b34bf766ba","UiLocales":null,"Nonce":"b4b47b1f71754cb58734dff9fe349b36","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"1018c7c6c5a04f318b6276b34bf766ba","nonce":"b4b47b1f71754cb58734dff9fe349b36"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:12:50.429 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:12:50.430 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:12:50.430 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:12:50.430 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:12:50.434 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:12:50.434 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:12:50.436 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"1018c7c6c5a04f318b6276b34bf766ba","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:12:51.016 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:12:51.016 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:12:51.016 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:12:51.016 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:12:51.016 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:12:51.016 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:12:51.016 +01:00 [DBG] Start discovery request
2020-03-28 13:12:51.150 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:12:51.151 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:12:51.151 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:12:51.151 +01:00 [DBG] Rendering check session result
2020-03-28 13:12:52.505 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:12:52.505 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:12:52.505 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:12:52.506 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:12:52.506 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:12:52.506 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:12:52.506 +01:00 [DBG] Start discovery request
2020-03-28 13:12:52.649 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:12:52.649 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:12:52.649 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:12:52.649 +01:00 [DBG] Rendering check session result
2020-03-28 13:16:45.887 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:16:45.887 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:16:45.889 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:16:45.893 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:16:45.893 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:16:45.893 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:16:45.893 +01:00 [DBG] Start discovery request
2020-03-28 13:16:45.900 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:16:45.901 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:16:45.901 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:16:45.901 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:16:45.901 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:16:45.901 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:16:45.901 +01:00 [DBG] Start discovery request
2020-03-28 13:16:45.932 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:16:45.933 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:16:45.933 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:16:45.933 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:16:45.933 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:16:45.933 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:16:45.933 +01:00 [DBG] Rendering check session result
2020-03-28 13:16:45.933 +01:00 [DBG] Start authorize request
2020-03-28 13:16:45.933 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:16:45.933 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:16:45.933 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:16:45.934 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:16:45.934 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"90b744a740934b918c9524d6ab320761","UiLocales":null,"Nonce":"fae57c37d2a64503a649d72c0f564a9f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"90b744a740934b918c9524d6ab320761","nonce":"fae57c37d2a64503a649d72c0f564a9f"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:16:46.001 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:16:46.001 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:16:46.002 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:16:46.002 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:16:46.010 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:16:46.010 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:16:46.011 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"90b744a740934b918c9524d6ab320761","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:16:46.568 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:16:46.568 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:16:46.568 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:16:46.568 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:16:46.568 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:16:46.568 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:16:46.568 +01:00 [DBG] Start discovery request
2020-03-28 13:16:46.676 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:16:46.676 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:16:46.676 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:16:46.676 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:02.669 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:02.670 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:02.670 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:02.673 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:02.673 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:02.673 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:02.673 +01:00 [DBG] Start discovery request
2020-03-28 13:18:02.681 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:02.681 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:02.681 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:02.681 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:02.681 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:02.681 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:02.681 +01:00 [DBG] Start discovery request
2020-03-28 13:18:02.734 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:18:02.734 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:18:02.734 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:18:02.734 +01:00 [DBG] Start authorize request
2020-03-28 13:18:02.734 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:18:02.734 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:18:02.735 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:18:02.735 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:18:02.735 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"55a09734476844159221763cef026456","UiLocales":null,"Nonce":"2915a5db97554db3889ea00e5b4176d9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"55a09734476844159221763cef026456","nonce":"2915a5db97554db3889ea00e5b4176d9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:18:02.748 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:02.752 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:02.753 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:02.755 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:02.755 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:18:02.755 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:18:02.755 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:18:02.755 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:18:02.770 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:18:02.770 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:18:02.773 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"55a09734476844159221763cef026456","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:18:03.241 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:03.241 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:03.241 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:03.242 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:03.242 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:03.242 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:03.242 +01:00 [DBG] Start discovery request
2020-03-28 13:18:03.340 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:03.340 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:03.340 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:03.340 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:17.161 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:17.161 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:17.161 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:17.161 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:17.162 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:17.162 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:17.162 +01:00 [DBG] Start discovery request
2020-03-28 13:18:17.270 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:17.271 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:17.271 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:17.271 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:33.493 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:33.493 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:33.494 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:33.494 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:33.494 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:33.494 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:33.494 +01:00 [DBG] Start discovery request
2020-03-28 13:18:33.613 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:33.613 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:33.613 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:33.613 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:35.783 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:35.783 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:35.783 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:35.783 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:35.783 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:35.783 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:35.783 +01:00 [DBG] Start discovery request
2020-03-28 13:18:35.893 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:35.893 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:35.893 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:35.893 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:37.586 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:37.586 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:37.586 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:37.587 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:37.587 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:37.587 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:37.587 +01:00 [DBG] Start discovery request
2020-03-28 13:18:37.672 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:37.672 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:37.673 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:37.673 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:43.196 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:43.196 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:43.196 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:43.197 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:43.197 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:43.197 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:43.197 +01:00 [DBG] Start discovery request
2020-03-28 13:18:43.281 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:43.281 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:43.281 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:43.281 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:46.795 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:46.795 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:46.795 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:46.795 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:46.795 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:46.795 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:46.795 +01:00 [DBG] Start discovery request
2020-03-28 13:18:46.876 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:46.877 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:46.877 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:46.877 +01:00 [DBG] Rendering check session result
2020-03-28 13:18:59.511 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:18:59.511 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:18:59.511 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:18:59.511 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:18:59.511 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:18:59.511 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:18:59.511 +01:00 [DBG] Start discovery request
2020-03-28 13:18:59.586 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:18:59.586 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:18:59.586 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:18:59.586 +01:00 [DBG] Rendering check session result
2020-03-28 13:19:07.555 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:19:07.555 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:19:07.555 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:19:07.556 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:19:07.556 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:19:07.556 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:19:07.556 +01:00 [DBG] Start discovery request
2020-03-28 13:19:07.640 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:19:07.640 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:19:07.640 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:19:07.640 +01:00 [DBG] Rendering check session result
2020-03-28 13:19:29.347 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:19:29.347 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:19:29.347 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:19:29.348 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:19:29.348 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:19:29.348 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:19:29.348 +01:00 [DBG] Start discovery request
2020-03-28 13:19:29.354 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:19:29.355 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:19:29.355 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:19:29.355 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:19:29.355 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:19:29.355 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:19:29.355 +01:00 [DBG] Start discovery request
2020-03-28 13:19:29.413 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:19:29.414 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:19:29.414 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:19:29.414 +01:00 [DBG] Start authorize request
2020-03-28 13:19:29.414 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:19:29.414 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:19:29.414 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:19:29.415 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:19:29.415 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"f72c6544b33945f59f1d84092d8908d4","UiLocales":null,"Nonce":"208c1b63355041af8f047d7283ce8672","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"f72c6544b33945f59f1d84092d8908d4","nonce":"208c1b63355041af8f047d7283ce8672"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:19:29.422 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:19:29.427 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:19:29.427 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:19:29.427 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:19:29.431 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:19:29.431 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:19:29.435 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"f72c6544b33945f59f1d84092d8908d4","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:19:29.473 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:19:29.473 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:19:29.474 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:19:29.474 +01:00 [DBG] Rendering check session result
2020-03-28 13:19:29.872 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:19:29.872 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:19:29.872 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:19:29.873 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:19:29.873 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:19:29.873 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:19:29.873 +01:00 [DBG] Start discovery request
2020-03-28 13:19:29.966 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:19:29.966 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:19:29.966 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:19:29.966 +01:00 [DBG] Rendering check session result
2020-03-28 13:20:37.034 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:20:37.035 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:20:37.036 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:20:37.039 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:20:37.039 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:20:37.039 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:20:37.039 +01:00 [DBG] Start discovery request
2020-03-28 13:20:37.048 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:20:37.048 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:20:37.048 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:20:37.048 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:20:37.049 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:20:37.049 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:20:37.049 +01:00 [DBG] Start discovery request
2020-03-28 13:20:37.130 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:20:37.131 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:20:37.131 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:20:37.131 +01:00 [DBG] Start authorize request
2020-03-28 13:20:37.131 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:20:37.131 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:20:37.131 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:20:37.132 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:20:37.132 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:20:37.132 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:20:37.132 +01:00 [DBG] Rendering check session result
2020-03-28 13:20:37.132 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:20:37.133 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"17b735f6f48c4f2da511c27dc3d4c451","UiLocales":null,"Nonce":"49d0bd1f4ccb40958bdce79f966326ac","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"17b735f6f48c4f2da511c27dc3d4c451","nonce":"49d0bd1f4ccb40958bdce79f966326ac"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:20:37.139 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:20:37.139 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:20:37.140 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:20:37.140 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:20:37.156 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:20:37.156 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:20:37.158 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"17b735f6f48c4f2da511c27dc3d4c451","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:20:37.909 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:20:37.910 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:20:37.910 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:20:37.910 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:20:37.910 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:20:37.910 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:20:37.910 +01:00 [DBG] Start discovery request
2020-03-28 13:20:38.004 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:20:38.004 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:20:38.004 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:20:38.004 +01:00 [DBG] Rendering check session result
2020-03-28 13:20:39.558 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:20:39.558 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:20:39.558 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:20:39.558 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:20:39.558 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:20:39.559 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:20:39.559 +01:00 [DBG] Start discovery request
2020-03-28 13:20:39.633 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:20:39.633 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:20:39.633 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:20:39.633 +01:00 [DBG] Rendering check session result
2020-03-28 13:21:16.192 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:21:16.192 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:21:16.193 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:21:16.193 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:21:16.193 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:21:16.193 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:21:16.193 +01:00 [DBG] Start discovery request
2020-03-28 13:21:16.327 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:21:16.327 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:21:16.327 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:21:16.328 +01:00 [DBG] Rendering check session result
2020-03-28 13:21:18.692 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:21:18.692 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:21:18.692 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:21:18.692 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:21:18.692 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:21:18.692 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:21:18.692 +01:00 [DBG] Start discovery request
2020-03-28 13:21:18.782 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:21:18.782 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:21:18.783 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:21:18.784 +01:00 [DBG] Rendering check session result
2020-03-28 13:21:52.023 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:21:52.024 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:21:52.024 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:21:52.024 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:21:52.024 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:21:52.024 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:21:52.024 +01:00 [DBG] Start discovery request
2020-03-28 13:21:52.031 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:21:52.031 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:21:52.032 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:21:52.032 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:21:52.032 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:21:52.033 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:21:52.033 +01:00 [DBG] Start discovery request
2020-03-28 13:21:52.095 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:21:52.095 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:21:52.096 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:21:52.096 +01:00 [DBG] Start authorize request
2020-03-28 13:21:52.096 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:21:52.096 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:21:52.096 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:21:52.096 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:21:52.096 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"38b15416ec9247a182bae02e81a64b9b","UiLocales":null,"Nonce":"003b7235598646c491c95e38b7753d63","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"38b15416ec9247a182bae02e81a64b9b","nonce":"003b7235598646c491c95e38b7753d63"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:21:52.100 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:21:52.100 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:21:52.100 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:21:52.100 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:21:52.105 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:21:52.105 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:21:52.107 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"38b15416ec9247a182bae02e81a64b9b","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:21:52.124 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:21:52.124 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:21:52.124 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:21:52.124 +01:00 [DBG] Rendering check session result
2020-03-28 13:21:52.592 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:21:52.592 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:21:52.592 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:21:52.592 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:21:52.592 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:21:52.592 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:21:52.592 +01:00 [DBG] Start discovery request
2020-03-28 13:21:52.694 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:21:52.694 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:21:52.694 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:21:52.694 +01:00 [DBG] Rendering check session result
2020-03-28 13:22:47.809 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:22:47.809 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:22:47.810 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:22:47.810 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:22:47.810 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:22:47.813 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:22:47.813 +01:00 [DBG] Start discovery request
2020-03-28 13:22:47.895 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:22:47.895 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:22:47.895 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:22:47.895 +01:00 [DBG] Rendering check session result
2020-03-28 13:22:50.927 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:22:50.927 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:22:50.927 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:22:50.927 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:22:50.927 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:22:50.927 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:22:50.927 +01:00 [DBG] Start discovery request
2020-03-28 13:22:51.024 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:22:51.024 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:22:51.024 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:22:51.024 +01:00 [DBG] Rendering check session result
2020-03-28 13:22:53.666 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:22:53.666 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:22:53.666 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:22:53.666 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:22:53.666 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:22:53.666 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:22:53.666 +01:00 [DBG] Start discovery request
2020-03-28 13:22:53.769 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:22:53.769 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:22:53.769 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:22:53.770 +01:00 [DBG] Rendering check session result
2020-03-28 13:22:57.741 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:22:57.741 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:22:57.741 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:22:57.741 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:22:57.742 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:22:57.742 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:22:57.742 +01:00 [DBG] Start discovery request
2020-03-28 13:22:57.870 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:22:57.870 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:22:57.870 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:22:57.870 +01:00 [DBG] Rendering check session result
2020-03-28 13:23:03.396 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:23:03.396 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:23:03.396 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:23:03.397 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:23:03.397 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:23:03.397 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:23:03.397 +01:00 [DBG] Start discovery request
2020-03-28 13:23:03.542 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:23:03.542 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:23:03.542 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:23:03.542 +01:00 [DBG] Rendering check session result
2020-03-28 13:24:08.546 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:24:08.546 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:24:08.546 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:24:08.547 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:24:08.547 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:24:08.547 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:24:08.547 +01:00 [DBG] Start discovery request
2020-03-28 13:24:08.559 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:24:08.559 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:24:08.559 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:24:08.560 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:24:08.560 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:24:08.560 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:24:08.560 +01:00 [DBG] Start discovery request
2020-03-28 13:24:08.634 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 13:24:08.634 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 13:24:08.634 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 13:24:08.634 +01:00 [DBG] Start authorize request
2020-03-28 13:24:08.634 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 13:24:08.634 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 13:24:08.635 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 13:24:08.635 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 13:24:08.635 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"82b82b6b4a9a494c93ea537d33bff939","UiLocales":null,"Nonce":"1d5b357c02cd44e9ad5f6ed8371e9f89","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lYZcNwAvM9qdZD17-MJu0w","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"82b82b6b4a9a494c93ea537d33bff939","nonce":"1d5b357c02cd44e9ad5f6ed8371e9f89"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 13:24:08.642 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 13:24:08.642 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 13:24:08.643 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 13:24:08.643 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 13:24:08.653 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 13:24:08.653 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 13:24:08.655 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"82b82b6b4a9a494c93ea537d33bff939","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 13:24:09.045 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 13:24:09.045 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 13:24:09.045 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 13:24:09.045 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 13:24:09.045 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 13:24:09.045 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 13:24:09.045 +01:00 [DBG] Start discovery request
2020-03-28 13:24:09.130 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 13:24:09.130 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 13:24:09.131 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 13:24:09.131 +01:00 [DBG] Rendering check session result
2020-03-28 18:00:12.007 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:00:12.013 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:00:12.014 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:00:12.026 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:00:12.028 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:00:12.028 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:00:12.029 +01:00 [DBG] Start discovery request
2020-03-28 18:00:12.092 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:00:12.092 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:00:12.092 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:00:12.092 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:00:12.092 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:00:12.092 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:00:12.092 +01:00 [DBG] Start discovery request
2020-03-28 18:00:12.112 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:00:12.121 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:00:12.121 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:00:12.121 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:00:12.122 +01:00 [DBG] Rendering check session result
2020-03-28 18:00:12.125 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:00:12.125 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:00:12.126 +01:00 [DBG] Start authorize request
2020-03-28 18:00:12.128 +01:00 [DBG] No user present in authorize request
2020-03-28 18:00:12.128 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:00:12.130 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:00:12.131 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:00:12.137 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"4bbc28fa3b0341adabe10a441520c72c","UiLocales":null,"Nonce":"9bcc309c9f574f2ab416ad319a645789","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"4bbc28fa3b0341adabe10a441520c72c","nonce":"9bcc309c9f574f2ab416ad319a645789"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:00:12.137 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:00:12.250 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:00:12.251 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:00:12.251 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:00:12.252 +01:00 [DBG] Start authorize request
2020-03-28 18:00:12.252 +01:00 [DBG] No user present in authorize request
2020-03-28 18:00:12.253 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:00:12.254 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:00:12.255 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:00:12.255 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"c2b24e430e3b492f82e1a4087a2e1baf","UiLocales":null,"Nonce":"79f7489a464546e3ac170ee91284dc64","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"c2b24e430e3b492f82e1a4087a2e1baf","nonce":"79f7489a464546e3ac170ee91284dc64","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:00:12.255 +01:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2020-03-28 18:00:12.257 +01:00 [INF] {"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"c2b24e430e3b492f82e1a4087a2e1baf","UiLocales":null,"Nonce":"79f7489a464546e3ac170ee91284dc64","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"c2b24e430e3b492f82e1a4087a2e1baf","nonce":"79f7489a464546e3ac170ee91284dc64","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:29.337 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:04:29.337 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:04:29.337 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:04:29.349 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:04:29.362 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:04:29.362 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:04:29.362 +01:00 [DBG] Start authorize callback request
2020-03-28 18:04:29.363 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:04:29.363 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:04:29.363 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:29.364 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:04:29.364 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"4bbc28fa3b0341adabe10a441520c72c","UiLocales":null,"Nonce":"9bcc309c9f574f2ab416ad319a645789","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"K-IJdypOyjDF0eFNfQX1mg","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"4bbc28fa3b0341adabe10a441520c72c","nonce":"9bcc309c9f574f2ab416ad319a645789"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:29.370 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:04:29.370 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:04:29.371 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:04:29.371 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:04:29.382 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:04:29.382 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:04:29.384 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"4bbc28fa3b0341adabe10a441520c72c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:04:29.386 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:04:30.637 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:04:30.637 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:30.637 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:30.637 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:04:30.637 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:04:30.637 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:04:30.637 +01:00 [DBG] Start discovery request
2020-03-28 18:04:30.722 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:04:30.722 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:04:30.722 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:04:30.722 +01:00 [DBG] Rendering check session result
2020-03-28 18:04:30.790 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:04:30.790 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:04:30.791 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:04:30.791 +01:00 [DBG] Start authorize request
2020-03-28 18:04:30.791 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:04:30.791 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:04:30.791 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:30.791 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:04:30.791 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"e14c78f3553c466f910feed393d36ea6","UiLocales":null,"Nonce":"f75a92b514854b79b1bb2f7498d7d791","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"K-IJdypOyjDF0eFNfQX1mg","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"e14c78f3553c466f910feed393d36ea6","nonce":"f75a92b514854b79b1bb2f7498d7d791","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:30.798 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:04:30.798 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:04:30.798 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:04:30.842 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e14c78f3553c466f910feed393d36ea6","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:04:31.220 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:04:31.220 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:31.221 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:31.221 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:04:31.221 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:04:31.221 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:04:31.221 +01:00 [DBG] Start discovery request
2020-03-28 18:04:31.291 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:04:31.291 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:04:31.291 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:04:31.291 +01:00 [DBG] Rendering check session result
2020-03-28 18:04:31.337 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:04:31.337 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:04:31.337 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:04:31.337 +01:00 [DBG] Start authorize request
2020-03-28 18:04:31.337 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:04:31.337 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:04:31.337 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:31.337 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:04:31.338 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"0b214969496b4bf0b5715dcecd004dea","UiLocales":null,"Nonce":"1673abe5ccdf432a8c9a2225196a0b0b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"K-IJdypOyjDF0eFNfQX1mg","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"0b214969496b4bf0b5715dcecd004dea","nonce":"1673abe5ccdf432a8c9a2225196a0b0b","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:31.342 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:04:31.342 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:04:31.342 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:04:31.347 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"0b214969496b4bf0b5715dcecd004dea","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:04:43.817 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:04:43.832 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:04:43.833 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:04:43.833 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:04:43.833 +01:00 [DBG] Start end session request validation
2020-03-28 18:04:43.834 +01:00 [DBG] Start identity token validation
2020-03-28 18:04:43.844 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:43.844 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:04:43.857 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:04:43.861 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585397444,"exp":1585397744,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"d21ec999500c4c0b9e550c3ad67424b9","iat":1585397444,"at_hash":"WTJjvuq_WMOD5pWKAidtyg","s_hash":"eTTPz7zDz9XTi1ztWw3ccg","sid":"lYZcNwAvM9qdZD17-MJu0w","sub":"test2@test.com","auth_time":1585397444,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:04:43.866 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:04:43.866 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:04:45.776 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:04:45.776 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:45.776 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:45.776 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:04:45.776 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:04:45.777 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:04:45.777 +01:00 [DBG] Start discovery request
2020-03-28 18:04:45.787 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:04:45.787 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:04:45.787 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:04:45.787 +01:00 [DBG] Start authorize request
2020-03-28 18:04:45.787 +01:00 [DBG] No user present in authorize request
2020-03-28 18:04:45.787 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:04:45.787 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:45.788 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:04:45.788 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e87c451f6c7549c2bee67bc69f6ea3ea","UiLocales":null,"Nonce":"1579431381c4410fbde3a5127a14f663","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e87c451f6c7549c2bee67bc69f6ea3ea","nonce":"1579431381c4410fbde3a5127a14f663"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:45.788 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:04:48.542 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:04:48.544 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:04:48.544 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:04:48.550 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:04:48.550 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:04:48.550 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:04:48.550 +01:00 [DBG] Start authorize callback request
2020-03-28 18:04:48.550 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:04:48.550 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:04:48.550 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:48.550 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:04:48.551 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e87c451f6c7549c2bee67bc69f6ea3ea","UiLocales":null,"Nonce":"1579431381c4410fbde3a5127a14f663","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"CR6wvzMFW0w2fY2qPiKYJw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e87c451f6c7549c2bee67bc69f6ea3ea","nonce":"1579431381c4410fbde3a5127a14f663"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:04:48.557 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:04:48.557 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:04:48.558 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:04:48.558 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:04:48.564 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:04:48.564 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:04:48.565 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e87c451f6c7549c2bee67bc69f6ea3ea","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:04:48.565 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:04:49.053 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:04:49.053 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:49.053 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:49.054 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:04:49.054 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:04:49.054 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:04:49.054 +01:00 [DBG] Start discovery request
2020-03-28 18:04:49.118 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:04:49.118 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:49.118 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:49.119 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:04:49.119 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:04:49.119 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:04:49.119 +01:00 [DBG] Start key discovery request
2020-03-28 18:04:49.165 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:04:49.165 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:04:49.165 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:04:49.165 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:04:49.166 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:04:49.166 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:04:49.166 +01:00 [DBG] Start userinfo request
2020-03-28 18:04:49.166 +01:00 [DBG] Bearer token found in header
2020-03-28 18:04:49.168 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:49.168 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:04:49.171 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:04:49.171 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415088,"exp":1585418688,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415088,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:04:49.173 +01:00 [DBG] Creating userinfo response
2020-03-28 18:04:49.174 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:04:49.174 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:04:49.174 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:04:49.174 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:04:49.178 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:04:49.178 +01:00 [DBG] End userinfo request
2020-03-28 18:04:49.206 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:04:49.206 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:04:49.208 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:04:49.209 +01:00 [DBG] Rendering check session result
2020-03-28 18:05:20.541 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:05:20.541 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:05:20.541 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:05:20.541 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:05:20.541 +01:00 [DBG] Start end session request validation
2020-03-28 18:05:20.541 +01:00 [DBG] Start identity token validation
2020-03-28 18:05:20.541 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:05:20.541 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:05:20.550 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:05:20.551 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415088,"exp":1585415388,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"1579431381c4410fbde3a5127a14f663","iat":1585415088,"at_hash":"ufgOOHVtAAi6PTUTBcH2JA","s_hash":"p7lgpuyKrnebMLkJ-Ajahg","sid":"CR6wvzMFW0w2fY2qPiKYJw","sub":"test2@test.com","auth_time":1585415088,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:05:20.551 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:05:20.551 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:05:24.977 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:05:24.977 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:05:24.977 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:05:24.978 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:05:24.978 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:05:24.978 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:05:24.978 +01:00 [DBG] Start discovery request
2020-03-28 18:05:24.993 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:05:24.993 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:05:24.994 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:05:24.994 +01:00 [DBG] Start authorize request
2020-03-28 18:05:24.994 +01:00 [DBG] No user present in authorize request
2020-03-28 18:05:24.994 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:05:24.995 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:05:24.996 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:05:24.997 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"9a1df524a96e498ab2a54631745e3218","UiLocales":null,"Nonce":"5d05a93e00ca4ca0b5bbf9d54510ff07","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"9a1df524a96e498ab2a54631745e3218","nonce":"5d05a93e00ca4ca0b5bbf9d54510ff07"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:05:24.997 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:05:28.198 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:05:28.198 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:05:28.198 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:05:28.204 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:05:28.205 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:05:28.205 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:05:28.205 +01:00 [DBG] Start authorize callback request
2020-03-28 18:05:28.205 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:05:28.205 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:05:28.205 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:05:28.206 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:05:28.206 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"9a1df524a96e498ab2a54631745e3218","UiLocales":null,"Nonce":"5d05a93e00ca4ca0b5bbf9d54510ff07","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"v1NYnI3lOyKoBLd28wZO9A","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"9a1df524a96e498ab2a54631745e3218","nonce":"5d05a93e00ca4ca0b5bbf9d54510ff07"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:05:28.210 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:05:28.210 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:05:28.210 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:05:28.210 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:05:28.216 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:05:28.216 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:05:28.219 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"9a1df524a96e498ab2a54631745e3218","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:05:28.220 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:05:29.280 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:05:29.280 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:05:29.280 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:05:29.281 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:05:29.281 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:05:29.281 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:05:29.281 +01:00 [DBG] Start discovery request
2020-03-28 18:05:29.339 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:05:29.339 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:05:29.339 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:05:29.340 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:05:29.340 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:05:29.340 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:05:29.340 +01:00 [DBG] Start key discovery request
2020-03-28 18:05:29.385 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:05:29.386 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:05:29.386 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:05:29.386 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:05:29.386 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:05:29.386 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:05:29.386 +01:00 [DBG] Start userinfo request
2020-03-28 18:05:29.386 +01:00 [DBG] Bearer token found in header
2020-03-28 18:05:29.387 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:05:29.387 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:05:29.390 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:05:29.390 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415128,"exp":1585418728,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415128,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:05:29.392 +01:00 [DBG] Creating userinfo response
2020-03-28 18:05:29.393 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:05:29.393 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:05:29.393 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:05:29.393 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:05:29.398 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:05:29.398 +01:00 [DBG] End userinfo request
2020-03-28 18:05:29.408 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:05:29.408 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:05:29.408 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:05:29.408 +01:00 [DBG] Rendering check session result
2020-03-28 18:06:19.794 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:19.795 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:19.795 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:19.798 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:19.798 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:19.798 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:19.798 +01:00 [DBG] Start discovery request
2020-03-28 18:06:19.805 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:19.805 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:19.805 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:19.805 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:19.805 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:19.805 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:19.805 +01:00 [DBG] Start discovery request
2020-03-28 18:06:19.859 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:06:19.859 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:06:19.859 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:06:19.859 +01:00 [DBG] Start authorize request
2020-03-28 18:06:19.860 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:06:19.860 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:06:19.860 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:06:19.860 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:06:19.860 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"040e66721e7249ffb6088c2cc4e7765c","UiLocales":null,"Nonce":"25d98734f2c84ee8b490b203284693a9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"v1NYnI3lOyKoBLd28wZO9A","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"040e66721e7249ffb6088c2cc4e7765c","nonce":"25d98734f2c84ee8b490b203284693a9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:06:19.866 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:06:19.866 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:06:19.866 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:06:19.866 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:06:19.882 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:06:19.882 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:06:19.884 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"040e66721e7249ffb6088c2cc4e7765c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:06:19.889 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:06:19.889 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:06:19.889 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:06:19.889 +01:00 [DBG] Rendering check session result
2020-03-28 18:06:20.254 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:20.254 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:20.254 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:20.254 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:20.254 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:20.254 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:20.254 +01:00 [DBG] Start discovery request
2020-03-28 18:06:20.350 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:06:20.350 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:06:20.350 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:06:20.350 +01:00 [DBG] Rendering check session result
2020-03-28 18:06:31.259 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:31.259 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:31.259 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:31.259 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:31.259 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:31.259 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:31.259 +01:00 [DBG] Start discovery request
2020-03-28 18:06:31.262 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:31.262 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:31.262 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:31.262 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:31.263 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:31.263 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:31.263 +01:00 [DBG] Start discovery request
2020-03-28 18:06:31.335 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:06:31.336 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:06:31.336 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:06:31.336 +01:00 [DBG] Start authorize request
2020-03-28 18:06:31.336 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:06:31.336 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:06:31.336 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:06:31.337 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:06:31.337 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"50d79603e7b54d22844597c8663af4dd","UiLocales":null,"Nonce":"1e3b453a7e944c78a716af3ab4120fef","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"v1NYnI3lOyKoBLd28wZO9A","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"50d79603e7b54d22844597c8663af4dd","nonce":"1e3b453a7e944c78a716af3ab4120fef"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:06:31.342 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:06:31.342 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:06:31.342 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:06:31.342 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:06:31.346 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:06:31.346 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:06:31.348 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"50d79603e7b54d22844597c8663af4dd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:06:31.366 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:06:31.366 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:06:31.366 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:06:31.366 +01:00 [DBG] Rendering check session result
2020-03-28 18:06:31.740 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:06:31.740 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:06:31.740 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:06:31.740 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:06:31.740 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:06:31.740 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:06:31.740 +01:00 [DBG] Start discovery request
2020-03-28 18:06:31.833 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:06:31.833 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:06:31.833 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:06:31.833 +01:00 [DBG] Rendering check session result
2020-03-28 18:07:21.582 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:07:21.583 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:07:21.583 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:07:21.583 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:07:21.583 +01:00 [DBG] Start end session request validation
2020-03-28 18:07:21.583 +01:00 [DBG] Start identity token validation
2020-03-28 18:07:21.583 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:07:21.583 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:07:21.597 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:07:21.598 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415128,"exp":1585415428,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"5d05a93e00ca4ca0b5bbf9d54510ff07","iat":1585415128,"at_hash":"B3o4bzN3cIt6L-1Ruzwfow","s_hash":"dOhV_BVNmz_e3QMolUR1hA","sid":"v1NYnI3lOyKoBLd28wZO9A","sub":"test2@test.com","auth_time":1585415128,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:07:21.598 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:07:21.598 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:10:56.539 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:10:56.539 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:10:56.539 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:10:56.543 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:10:56.543 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:10:56.543 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:10:56.543 +01:00 [DBG] Start discovery request
2020-03-28 18:10:56.579 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:10:56.581 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:10:56.581 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:10:56.581 +01:00 [DBG] Start authorize request
2020-03-28 18:10:56.581 +01:00 [DBG] No user present in authorize request
2020-03-28 18:10:56.581 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:10:56.581 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:10:56.582 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:10:56.583 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"1021e6e5c44840a8989ddd610d2da4dd","UiLocales":null,"Nonce":"bb0a11bb13024924b4a92b8729ea33c5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"1021e6e5c44840a8989ddd610d2da4dd","nonce":"bb0a11bb13024924b4a92b8729ea33c5"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:10:56.583 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:10:59.684 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:10:59.684 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:10:59.684 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:10:59.691 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:10:59.692 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:10:59.692 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:10:59.692 +01:00 [DBG] Start authorize callback request
2020-03-28 18:10:59.692 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:10:59.692 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:10:59.692 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:10:59.693 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:10:59.693 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"1021e6e5c44840a8989ddd610d2da4dd","UiLocales":null,"Nonce":"bb0a11bb13024924b4a92b8729ea33c5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"CE6FELrqCoIcrxWY5Lt5Ew","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"1021e6e5c44840a8989ddd610d2da4dd","nonce":"bb0a11bb13024924b4a92b8729ea33c5"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:10:59.697 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:10:59.698 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:10:59.698 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:10:59.698 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:10:59.704 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:10:59.704 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:10:59.706 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"1021e6e5c44840a8989ddd610d2da4dd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:10:59.707 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:11:01.024 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:11:01.024 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:11:01.024 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:11:01.024 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:11:01.024 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:11:01.024 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:11:01.024 +01:00 [DBG] Start discovery request
2020-03-28 18:11:01.077 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:11:01.077 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:11:01.077 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:11:01.077 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:11:01.078 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:11:01.078 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:11:01.078 +01:00 [DBG] Start key discovery request
2020-03-28 18:11:01.121 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:11:01.121 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:11:01.121 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:11:01.122 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:11:01.122 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:11:01.122 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:11:01.122 +01:00 [DBG] Start userinfo request
2020-03-28 18:11:01.122 +01:00 [DBG] Bearer token found in header
2020-03-28 18:11:01.123 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:11:01.124 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:11:01.126 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:11:01.127 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415459,"exp":1585419059,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415459,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:11:01.128 +01:00 [DBG] Creating userinfo response
2020-03-28 18:11:01.128 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:11:01.128 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:11:01.128 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:11:01.129 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:11:01.133 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:11:01.133 +01:00 [DBG] End userinfo request
2020-03-28 18:11:01.144 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:11:01.144 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:11:01.144 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:11:01.144 +01:00 [DBG] Rendering check session result
2020-03-28 18:11:45.626 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:11:45.628 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:11:45.628 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:11:45.652 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:11:45.652 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:11:45.652 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:11:45.652 +01:00 [DBG] Start discovery request
2020-03-28 18:11:45.714 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:11:45.715 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:11:45.715 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:11:45.715 +01:00 [DBG] Rendering check session result
2020-03-28 18:11:54.817 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:11:54.818 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:11:54.818 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:11:54.818 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:11:54.818 +01:00 [DBG] Start end session request validation
2020-03-28 18:11:54.818 +01:00 [DBG] Start identity token validation
2020-03-28 18:11:54.818 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:11:54.818 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:11:54.824 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:11:54.824 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415459,"exp":1585415759,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"bb0a11bb13024924b4a92b8729ea33c5","iat":1585415459,"at_hash":"nPYtF2PMgB229SFpM8No5Q","s_hash":"de1-Sy6w-UgJtypIeDNu5Q","sid":"CE6FELrqCoIcrxWY5Lt5Ew","sub":"test2@test.com","auth_time":1585415459,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:11:54.825 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:11:54.825 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:12:00.305 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:12:00.305 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:00.305 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:00.306 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:12:00.306 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:12:00.306 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:12:00.306 +01:00 [DBG] Start discovery request
2020-03-28 18:12:00.338 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:12:00.338 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:12:00.338 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:12:00.338 +01:00 [DBG] Start authorize request
2020-03-28 18:12:00.338 +01:00 [DBG] No user present in authorize request
2020-03-28 18:12:00.338 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:12:00.338 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:00.339 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:12:00.339 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"5c40fbe8120c4ea5a2eade31b9273fda","UiLocales":null,"Nonce":"640bfe7a0e4c474aab44de4e43d469d1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"5c40fbe8120c4ea5a2eade31b9273fda","nonce":"640bfe7a0e4c474aab44de4e43d469d1"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:12:00.339 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:12:06.206 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:12:06.206 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:12:06.206 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:12:06.214 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:12:06.214 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:12:06.214 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:12:06.214 +01:00 [DBG] Start authorize callback request
2020-03-28 18:12:06.215 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:12:06.215 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:12:06.215 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:06.215 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:12:06.215 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"5c40fbe8120c4ea5a2eade31b9273fda","UiLocales":null,"Nonce":"640bfe7a0e4c474aab44de4e43d469d1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"zTbQZ_7ISMXvn4VUHseOjw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"5c40fbe8120c4ea5a2eade31b9273fda","nonce":"640bfe7a0e4c474aab44de4e43d469d1"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:12:06.219 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:12:06.219 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:12:06.219 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:12:06.219 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:12:06.224 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:12:06.224 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:12:06.227 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"5c40fbe8120c4ea5a2eade31b9273fda","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:12:06.227 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:12:07.307 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:12:07.307 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:07.307 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:07.308 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:12:07.308 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:12:07.308 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:12:07.308 +01:00 [DBG] Start discovery request
2020-03-28 18:12:07.354 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:12:07.354 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:07.354 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:07.355 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:12:07.356 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:12:07.356 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:12:07.356 +01:00 [DBG] Start key discovery request
2020-03-28 18:12:07.388 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:12:07.388 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:07.388 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:07.388 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:12:07.388 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:12:07.388 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:12:07.388 +01:00 [DBG] Start userinfo request
2020-03-28 18:12:07.388 +01:00 [DBG] Bearer token found in header
2020-03-28 18:12:07.389 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:07.389 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:07.395 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:12:07.395 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415526,"exp":1585419126,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415526,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:12:07.396 +01:00 [DBG] Creating userinfo response
2020-03-28 18:12:07.397 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:07.397 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:07.397 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:12:07.397 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:07.401 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:12:07.401 +01:00 [DBG] End userinfo request
2020-03-28 18:12:07.412 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:12:07.412 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:12:07.412 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:12:07.412 +01:00 [DBG] Rendering check session result
2020-03-28 18:12:19.870 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:12:19.870 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:19.870 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:19.871 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:12:19.871 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:12:19.871 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:12:19.871 +01:00 [DBG] Start discovery request
2020-03-28 18:12:19.967 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:12:19.967 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:12:19.967 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:12:19.967 +01:00 [DBG] Rendering check session result
2020-03-28 18:12:25.292 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:12:25.292 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:12:25.292 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:12:25.292 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:12:25.292 +01:00 [DBG] Start end session request validation
2020-03-28 18:12:25.292 +01:00 [DBG] Start identity token validation
2020-03-28 18:12:25.293 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:25.293 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:12:25.299 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:12:25.299 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415526,"exp":1585415826,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"640bfe7a0e4c474aab44de4e43d469d1","iat":1585415526,"at_hash":"hECg2k7HDNf_EaLlTgQNzQ","s_hash":"TLa_Yjdf70sTvTcJ0ffxfQ","sid":"zTbQZ_7ISMXvn4VUHseOjw","sub":"test2@test.com","auth_time":1585415526,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:12:25.299 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:12:25.299 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:12:30.923 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:12:30.923 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:30.923 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:30.924 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:12:30.924 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:12:30.924 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:12:30.924 +01:00 [DBG] Start discovery request
2020-03-28 18:12:30.961 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:12:30.962 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:12:30.962 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:12:30.962 +01:00 [DBG] Start authorize request
2020-03-28 18:12:30.962 +01:00 [DBG] No user present in authorize request
2020-03-28 18:12:30.962 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:12:30.962 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:30.963 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:12:30.963 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"a6b07470f8d54075a923495e3e30479c","UiLocales":null,"Nonce":"f9e62ce8f6df42caa2079d1fb5809387","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"a6b07470f8d54075a923495e3e30479c","nonce":"f9e62ce8f6df42caa2079d1fb5809387"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:12:30.963 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:12:35.947 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:12:35.947 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:12:35.947 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:12:35.953 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:12:35.953 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:12:35.953 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:12:35.953 +01:00 [DBG] Start authorize callback request
2020-03-28 18:12:35.953 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:12:35.953 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:12:35.954 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:35.954 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:12:35.954 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"a6b07470f8d54075a923495e3e30479c","UiLocales":null,"Nonce":"f9e62ce8f6df42caa2079d1fb5809387","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"tJUSqNkTsgdARZY0Gol65g","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"a6b07470f8d54075a923495e3e30479c","nonce":"f9e62ce8f6df42caa2079d1fb5809387"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:12:35.958 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:12:35.958 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:12:35.958 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:12:35.958 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:12:35.988 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:12:35.988 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:12:35.989 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"a6b07470f8d54075a923495e3e30479c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:12:35.989 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:12:37.282 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:12:37.282 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:37.282 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:37.282 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:12:37.283 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:12:37.283 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:12:37.283 +01:00 [DBG] Start discovery request
2020-03-28 18:12:37.335 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:12:37.335 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:37.335 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:37.335 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:12:37.335 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:12:37.336 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:12:37.336 +01:00 [DBG] Start key discovery request
2020-03-28 18:12:37.377 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:12:37.377 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:12:37.377 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:12:37.377 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:12:37.378 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:12:37.378 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:12:37.378 +01:00 [DBG] Start userinfo request
2020-03-28 18:12:37.378 +01:00 [DBG] Bearer token found in header
2020-03-28 18:12:37.379 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:37.379 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:12:37.389 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:12:37.389 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415555,"exp":1585419155,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415555,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:12:37.391 +01:00 [DBG] Creating userinfo response
2020-03-28 18:12:37.391 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:37.391 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:37.392 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:12:37.392 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:12:37.393 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:12:37.393 +01:00 [DBG] End userinfo request
2020-03-28 18:12:37.408 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:12:37.408 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:12:37.408 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:12:37.408 +01:00 [DBG] Rendering check session result
2020-03-28 18:14:19.502 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:14:19.502 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:19.502 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:19.506 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:14:19.506 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:14:19.506 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:14:19.506 +01:00 [DBG] Start discovery request
2020-03-28 18:14:19.662 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:14:19.662 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:14:19.662 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:14:19.662 +01:00 [DBG] Rendering check session result
2020-03-28 18:14:21.573 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:14:21.573 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:21.573 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:21.573 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:14:21.573 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:14:21.573 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:14:21.573 +01:00 [DBG] Start discovery request
2020-03-28 18:14:21.650 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:14:21.650 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:14:21.650 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:14:21.651 +01:00 [DBG] Rendering check session result
2020-03-28 18:14:30.966 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:14:30.967 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:14:30.967 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:14:30.967 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:14:30.967 +01:00 [DBG] Start end session request validation
2020-03-28 18:14:30.967 +01:00 [DBG] Start identity token validation
2020-03-28 18:14:30.967 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:14:30.967 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:14:30.972 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:14:30.973 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415555,"exp":1585415855,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"f9e62ce8f6df42caa2079d1fb5809387","iat":1585415555,"at_hash":"GHxk0ZejoT6IsW24XQxWMw","s_hash":"j7jPAJqddU_jnYl8rvk7mA","sid":"tJUSqNkTsgdARZY0Gol65g","sub":"test2@test.com","auth_time":1585415555,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:14:30.973 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:14:30.973 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:14:33.667 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:14:33.667 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:33.667 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:33.667 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:14:33.667 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:14:33.667 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:14:33.667 +01:00 [DBG] Start discovery request
2020-03-28 18:14:33.693 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:14:33.693 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:14:33.693 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:14:33.693 +01:00 [DBG] Start authorize request
2020-03-28 18:14:33.693 +01:00 [DBG] No user present in authorize request
2020-03-28 18:14:33.693 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:14:33.694 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:14:33.694 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:14:33.695 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"11502a4721f94845bad24a9f62f36dac","UiLocales":null,"Nonce":"9a057fb85349479d85cebbfa4f48c4a9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"11502a4721f94845bad24a9f62f36dac","nonce":"9a057fb85349479d85cebbfa4f48c4a9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:14:33.695 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:14:36.453 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:14:36.453 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:14:36.453 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:14:36.461 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:14:36.461 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:14:36.461 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:14:36.461 +01:00 [DBG] Start authorize callback request
2020-03-28 18:14:36.462 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:14:36.462 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:14:36.462 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:14:36.462 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:14:36.462 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"11502a4721f94845bad24a9f62f36dac","UiLocales":null,"Nonce":"9a057fb85349479d85cebbfa4f48c4a9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"MBNBGo-VrN2ul9gUHNaXSg","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"11502a4721f94845bad24a9f62f36dac","nonce":"9a057fb85349479d85cebbfa4f48c4a9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:14:36.466 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:14:36.466 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:14:36.466 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:14:36.466 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:14:36.471 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:14:36.471 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:14:36.474 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"11502a4721f94845bad24a9f62f36dac","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:14:36.474 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:14:36.913 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:14:36.913 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:36.913 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:36.913 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:14:36.913 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:14:36.913 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:14:36.913 +01:00 [DBG] Start discovery request
2020-03-28 18:14:36.978 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:14:36.978 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:36.978 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:36.979 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:14:36.979 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:14:36.979 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:14:36.979 +01:00 [DBG] Start key discovery request
2020-03-28 18:14:37.014 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:14:37.014 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:37.014 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:37.015 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:14:37.015 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:14:37.015 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:14:37.015 +01:00 [DBG] Start userinfo request
2020-03-28 18:14:37.015 +01:00 [DBG] Bearer token found in header
2020-03-28 18:14:37.016 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:14:37.016 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:14:37.018 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:14:37.018 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415676,"exp":1585419276,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415676,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:14:37.019 +01:00 [DBG] Creating userinfo response
2020-03-28 18:14:37.019 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:14:37.019 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:14:37.019 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:14:37.019 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:14:37.020 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:14:37.020 +01:00 [DBG] End userinfo request
2020-03-28 18:14:37.037 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:14:37.038 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:14:37.038 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:14:37.038 +01:00 [DBG] Rendering check session result
2020-03-28 18:14:56.612 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:14:56.612 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:14:56.612 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:14:56.612 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:14:56.612 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:14:56.612 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:14:56.612 +01:00 [DBG] Start discovery request
2020-03-28 18:14:56.693 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:14:56.693 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:14:56.693 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:14:56.693 +01:00 [DBG] Rendering check session result
2020-03-28 18:15:00.837 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:15:00.837 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:15:00.837 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:15:00.837 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:15:00.837 +01:00 [DBG] Start end session request validation
2020-03-28 18:15:00.837 +01:00 [DBG] Start identity token validation
2020-03-28 18:15:00.837 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:00.838 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:15:00.842 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:15:00.842 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415676,"exp":1585415976,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"9a057fb85349479d85cebbfa4f48c4a9","iat":1585415676,"at_hash":"cWC47NVyU2fF5cCEWxn67A","s_hash":"WD8e4LgF_fqzimp06LLAFg","sid":"MBNBGo-VrN2ul9gUHNaXSg","sub":"test2@test.com","auth_time":1585415676,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:15:00.842 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:15:00.842 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:15:02.748 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:02.748 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:02.748 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:02.749 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:02.749 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:02.749 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:02.749 +01:00 [DBG] Start discovery request
2020-03-28 18:15:02.760 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:15:02.760 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:15:02.760 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:15:02.761 +01:00 [DBG] Start authorize request
2020-03-28 18:15:02.761 +01:00 [DBG] No user present in authorize request
2020-03-28 18:15:02.761 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:15:02.761 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:02.762 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:15:02.762 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"60aa8c9c9d8542f5a028bc5193a9155c","UiLocales":null,"Nonce":"e15d9c7977f4460a99aaf47a5f6af82b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"60aa8c9c9d8542f5a028bc5193a9155c","nonce":"e15d9c7977f4460a99aaf47a5f6af82b"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:15:02.762 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:15:06.163 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:06.163 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:06.163 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:06.164 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:06.164 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:06.164 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:06.164 +01:00 [DBG] Start discovery request
2020-03-28 18:15:06.190 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:15:06.190 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:15:06.190 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:15:06.190 +01:00 [DBG] Start authorize request
2020-03-28 18:15:06.191 +01:00 [DBG] No user present in authorize request
2020-03-28 18:15:06.191 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:15:06.191 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:06.191 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:15:06.191 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"890e65498a2545888f6df33d77fc4df5","UiLocales":null,"Nonce":"d20f9d837ca840aa95f1a64f83961039","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"890e65498a2545888f6df33d77fc4df5","nonce":"d20f9d837ca840aa95f1a64f83961039"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:15:06.192 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:15:09.899 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:15:09.899 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:15:09.899 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:15:09.904 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:15:09.905 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:15:09.905 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:15:09.905 +01:00 [DBG] Start authorize callback request
2020-03-28 18:15:09.905 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:15:09.905 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:15:09.905 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:09.905 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:15:09.905 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"890e65498a2545888f6df33d77fc4df5","UiLocales":null,"Nonce":"d20f9d837ca840aa95f1a64f83961039","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"x50nWDB-1OO8kWBZSKMA6A","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"890e65498a2545888f6df33d77fc4df5","nonce":"d20f9d837ca840aa95f1a64f83961039"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:15:09.908 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:15:09.908 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:15:09.908 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:15:09.908 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:15:09.910 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:15:09.911 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:15:09.912 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"890e65498a2545888f6df33d77fc4df5","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:15:09.912 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:15:10.333 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:10.333 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:10.333 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:10.333 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:10.334 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:10.334 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:10.334 +01:00 [DBG] Start discovery request
2020-03-28 18:15:10.388 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:15:10.388 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:10.388 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:10.388 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:15:10.388 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:15:10.388 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:15:10.389 +01:00 [DBG] Start key discovery request
2020-03-28 18:15:10.420 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:15:10.420 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:10.420 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:10.420 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:15:10.420 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:15:10.420 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:15:10.420 +01:00 [DBG] Start userinfo request
2020-03-28 18:15:10.421 +01:00 [DBG] Bearer token found in header
2020-03-28 18:15:10.421 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:10.421 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:10.423 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:15:10.424 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415709,"exp":1585419309,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415709,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:15:10.425 +01:00 [DBG] Creating userinfo response
2020-03-28 18:15:10.425 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:15:10.425 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:15:10.425 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:15:10.425 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:15:10.426 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:15:10.427 +01:00 [DBG] End userinfo request
2020-03-28 18:15:10.440 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:15:10.440 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:15:10.441 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:15:10.441 +01:00 [DBG] Rendering check session result
2020-03-28 18:15:54.462 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:54.462 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:54.462 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:54.485 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:54.486 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:54.486 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:54.486 +01:00 [DBG] Start discovery request
2020-03-28 18:15:54.495 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:54.495 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:54.495 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:54.495 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:54.495 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:54.495 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:54.495 +01:00 [DBG] Start discovery request
2020-03-28 18:15:54.558 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:15:54.558 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:15:54.558 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:15:54.558 +01:00 [DBG] Start authorize request
2020-03-28 18:15:54.558 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:15:54.558 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:15:54.558 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:15:54.559 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:15:54.559 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"91d9cffb4f1e4af596f0894af15a120b","UiLocales":null,"Nonce":"c9157ee6e5ff4029b283ca9315d081f2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"x50nWDB-1OO8kWBZSKMA6A","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"91d9cffb4f1e4af596f0894af15a120b","nonce":"c9157ee6e5ff4029b283ca9315d081f2"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:15:54.562 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:15:54.562 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:15:54.562 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:15:54.562 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:15:54.568 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:15:54.568 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:15:54.569 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"91d9cffb4f1e4af596f0894af15a120b","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:15:54.858 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:15:54.858 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:15:54.858 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:15:54.858 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:15:54.858 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:15:54.858 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:15:54.858 +01:00 [DBG] Start discovery request
2020-03-28 18:15:54.952 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:15:54.952 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:15:54.952 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:15:54.952 +01:00 [DBG] Rendering check session result
2020-03-28 18:16:05.062 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:16:05.062 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:16:05.062 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:16:05.062 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:16:05.062 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:16:05.062 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:16:05.062 +01:00 [DBG] Start discovery request
2020-03-28 18:16:05.132 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:16:05.132 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:16:05.132 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:16:05.133 +01:00 [DBG] Rendering check session result
2020-03-28 18:17:14.728 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:17:14.728 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:17:14.729 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:17:14.729 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:17:14.729 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:17:14.729 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:17:14.729 +01:00 [DBG] Start discovery request
2020-03-28 18:17:14.820 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:17:14.821 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:17:14.821 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:17:14.821 +01:00 [DBG] Rendering check session result
2020-03-28 18:17:30.490 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:17:30.490 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:17:30.490 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:17:30.490 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:17:30.490 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:17:30.490 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:17:30.490 +01:00 [DBG] Start discovery request
2020-03-28 18:17:30.571 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:17:30.571 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:17:30.571 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:17:30.572 +01:00 [DBG] Rendering check session result
2020-03-28 18:17:38.153 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:17:38.153 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:17:38.153 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:17:38.153 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:17:38.153 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:17:38.153 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:17:38.153 +01:00 [DBG] Start discovery request
2020-03-28 18:17:38.229 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:17:38.229 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:17:38.230 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:17:38.230 +01:00 [DBG] Rendering check session result
2020-03-28 18:17:54.304 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:17:54.304 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:17:54.304 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:17:54.304 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:17:54.304 +01:00 [DBG] Start end session request validation
2020-03-28 18:17:54.304 +01:00 [DBG] Start identity token validation
2020-03-28 18:17:54.304 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:17:54.304 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:17:54.314 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:17:54.315 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415709,"exp":1585416009,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"d20f9d837ca840aa95f1a64f83961039","iat":1585415709,"at_hash":"X1h-zfOLAsC5Jntgy35kAA","s_hash":"PkRov08OpFYjPJqmqtf15A","sid":"x50nWDB-1OO8kWBZSKMA6A","sub":"test2@test.com","auth_time":1585415709,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:17:54.315 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:17:54.315 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:17:57.131 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:17:57.131 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:17:57.131 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:17:57.132 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:17:57.132 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:17:57.132 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:17:57.132 +01:00 [DBG] Start discovery request
2020-03-28 18:17:57.167 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:17:57.167 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:17:57.167 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:17:57.167 +01:00 [DBG] Start authorize request
2020-03-28 18:17:57.167 +01:00 [DBG] No user present in authorize request
2020-03-28 18:17:57.167 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:17:57.167 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:17:57.167 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:17:57.168 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"eccc8e7196d64d6f81bda6a2f5dcc8f5","UiLocales":null,"Nonce":"dd426e35dad04533a9df79ffeaa55106","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"eccc8e7196d64d6f81bda6a2f5dcc8f5","nonce":"dd426e35dad04533a9df79ffeaa55106"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:17:57.168 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:18:00.043 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:18:00.043 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:18:00.043 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:18:00.049 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:18:00.049 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:18:00.049 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:18:00.049 +01:00 [DBG] Start authorize callback request
2020-03-28 18:18:00.049 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:18:00.049 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:18:00.049 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:18:00.049 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:18:00.049 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"eccc8e7196d64d6f81bda6a2f5dcc8f5","UiLocales":null,"Nonce":"dd426e35dad04533a9df79ffeaa55106","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"KLXi59ycvNC20KrU7ihHpA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"eccc8e7196d64d6f81bda6a2f5dcc8f5","nonce":"dd426e35dad04533a9df79ffeaa55106"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:18:00.052 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:18:00.053 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:18:00.053 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:18:00.053 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:18:00.059 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:18:00.059 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:18:00.060 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"eccc8e7196d64d6f81bda6a2f5dcc8f5","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:18:00.060 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:18:00.472 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:18:00.472 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:00.472 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:00.472 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:18:00.472 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:18:00.473 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:18:00.473 +01:00 [DBG] Start discovery request
2020-03-28 18:18:00.531 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:18:00.532 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:00.532 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:00.532 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:18:00.532 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:18:00.533 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:18:00.533 +01:00 [DBG] Start key discovery request
2020-03-28 18:18:00.565 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:18:00.565 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:00.565 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:00.566 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:18:00.566 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:18:00.566 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:18:00.566 +01:00 [DBG] Start userinfo request
2020-03-28 18:18:00.566 +01:00 [DBG] Bearer token found in header
2020-03-28 18:18:00.566 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:18:00.566 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:18:00.569 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:18:00.570 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415880,"exp":1585419480,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415880,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:18:00.571 +01:00 [DBG] Creating userinfo response
2020-03-28 18:18:00.571 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:18:00.571 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:18:00.572 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:18:00.572 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:18:00.574 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:18:00.575 +01:00 [DBG] End userinfo request
2020-03-28 18:18:00.597 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:18:00.597 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:18:00.597 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:18:00.597 +01:00 [DBG] Rendering check session result
2020-03-28 18:18:38.499 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:18:38.499 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:38.499 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:38.500 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:18:38.500 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:18:38.500 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:18:38.500 +01:00 [DBG] Start discovery request
2020-03-28 18:18:38.620 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:18:38.620 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:18:38.620 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:18:38.620 +01:00 [DBG] Rendering check session result
2020-03-28 18:18:44.119 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:18:44.119 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:44.119 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:44.119 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:18:44.119 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:18:44.119 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:18:44.119 +01:00 [DBG] Start discovery request
2020-03-28 18:18:44.228 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:18:44.228 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:18:44.228 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:18:44.228 +01:00 [DBG] Rendering check session result
2020-03-28 18:18:52.999 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:18:52.999 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:18:52.999 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:18:52.999 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:18:52.999 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:18:52.999 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:18:52.999 +01:00 [DBG] Start discovery request
2020-03-28 18:18:53.180 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:18:53.180 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:18:53.180 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:18:53.180 +01:00 [DBG] Rendering check session result
2020-03-28 18:19:26.012 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:19:26.012 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:26.012 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:26.013 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:19:26.013 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:19:26.013 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:19:26.013 +01:00 [DBG] Start discovery request
2020-03-28 18:19:26.101 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:19:26.101 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:19:26.101 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:19:26.101 +01:00 [DBG] Rendering check session result
2020-03-28 18:19:28.524 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:19:28.524 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:28.524 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:28.524 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:19:28.524 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:19:28.524 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:19:28.524 +01:00 [DBG] Start discovery request
2020-03-28 18:19:28.612 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:19:28.612 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:19:28.612 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:19:28.612 +01:00 [DBG] Rendering check session result
2020-03-28 18:19:40.935 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:19:40.935 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:19:40.935 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:19:40.935 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:19:40.935 +01:00 [DBG] Start end session request validation
2020-03-28 18:19:40.935 +01:00 [DBG] Start identity token validation
2020-03-28 18:19:40.936 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:19:40.936 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:19:40.944 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:19:40.944 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415880,"exp":1585416180,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"dd426e35dad04533a9df79ffeaa55106","iat":1585415880,"at_hash":"imgSM3Ltvr7xsY93L7WZLQ","s_hash":"qQaPQlJFRTfHWoxq7Kg1SA","sid":"KLXi59ycvNC20KrU7ihHpA","sub":"test2@test.com","auth_time":1585415880,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:19:40.944 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:19:40.944 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:19:43.470 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:19:43.471 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:43.471 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:43.472 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:19:43.472 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:19:43.472 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:19:43.472 +01:00 [DBG] Start discovery request
2020-03-28 18:19:43.514 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:19:43.514 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:19:43.514 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:19:43.515 +01:00 [DBG] Start authorize request
2020-03-28 18:19:43.515 +01:00 [DBG] No user present in authorize request
2020-03-28 18:19:43.515 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:19:43.515 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:19:43.516 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:19:43.516 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"cb5873a21c7248bdb79300d9275d2e6a","UiLocales":null,"Nonce":"5f95c2454caa442b8e52618a661f63a5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"cb5873a21c7248bdb79300d9275d2e6a","nonce":"5f95c2454caa442b8e52618a661f63a5"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:19:43.516 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:19:45.856 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:19:45.856 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:19:45.856 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:19:45.861 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:19:45.861 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:19:45.861 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:19:45.861 +01:00 [DBG] Start authorize callback request
2020-03-28 18:19:45.862 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:19:45.862 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:19:45.862 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:19:45.862 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:19:45.862 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"cb5873a21c7248bdb79300d9275d2e6a","UiLocales":null,"Nonce":"5f95c2454caa442b8e52618a661f63a5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"RM_uw4mM36AGr924EIYLXA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"cb5873a21c7248bdb79300d9275d2e6a","nonce":"5f95c2454caa442b8e52618a661f63a5"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:19:45.865 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:19:45.865 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:19:45.865 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:19:45.865 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:19:45.870 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:19:45.870 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:19:45.872 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"cb5873a21c7248bdb79300d9275d2e6a","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:19:45.872 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:19:46.949 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:19:46.949 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:46.949 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:46.950 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:19:46.950 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:19:46.950 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:19:46.950 +01:00 [DBG] Start discovery request
2020-03-28 18:19:47.001 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:19:47.001 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:47.002 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:47.002 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:19:47.002 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:19:47.002 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:19:47.002 +01:00 [DBG] Start key discovery request
2020-03-28 18:19:47.033 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:19:47.033 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:19:47.033 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:19:47.034 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:19:47.034 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:19:47.034 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:19:47.034 +01:00 [DBG] Start userinfo request
2020-03-28 18:19:47.034 +01:00 [DBG] Bearer token found in header
2020-03-28 18:19:47.037 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:19:47.037 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:19:47.041 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:19:47.041 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415985,"exp":1585419585,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585415985,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:19:47.042 +01:00 [DBG] Creating userinfo response
2020-03-28 18:19:47.042 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:19:47.043 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:19:47.043 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:19:47.043 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:19:47.045 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:19:47.045 +01:00 [DBG] End userinfo request
2020-03-28 18:19:47.064 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:19:47.064 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:19:47.064 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:19:47.064 +01:00 [DBG] Rendering check session result
2020-03-28 18:20:13.912 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:20:13.912 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:13.912 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:13.912 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:20:13.912 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:20:13.912 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:20:13.912 +01:00 [DBG] Start discovery request
2020-03-28 18:20:14.011 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:20:14.011 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:20:14.011 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:20:14.011 +01:00 [DBG] Rendering check session result
2020-03-28 18:20:15.087 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:20:15.087 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:15.087 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:15.088 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:20:15.088 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:20:15.088 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:20:15.088 +01:00 [DBG] Start discovery request
2020-03-28 18:20:15.202 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:20:15.202 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:20:15.202 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:20:15.202 +01:00 [DBG] Rendering check session result
2020-03-28 18:20:25.027 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:20:25.027 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:20:25.027 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:20:25.028 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:20:25.028 +01:00 [DBG] Start end session request validation
2020-03-28 18:20:25.028 +01:00 [DBG] Start identity token validation
2020-03-28 18:20:25.028 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:20:25.028 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:20:25.032 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:20:25.032 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585415985,"exp":1585416285,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"5f95c2454caa442b8e52618a661f63a5","iat":1585415985,"at_hash":"DihkC39MVbok7EhSgsfL3w","s_hash":"UqNQbRnkshFolFoFTKGOEg","sid":"RM_uw4mM36AGr924EIYLXA","sub":"test2@test.com","auth_time":1585415985,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:20:25.033 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:20:25.033 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:20:30.185 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:20:30.185 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:30.185 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:30.185 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:20:30.185 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:20:30.185 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:20:30.185 +01:00 [DBG] Start discovery request
2020-03-28 18:20:30.218 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:20:30.218 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:20:30.218 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:20:30.218 +01:00 [DBG] Start authorize request
2020-03-28 18:20:30.218 +01:00 [DBG] No user present in authorize request
2020-03-28 18:20:30.218 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:20:30.218 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:20:30.219 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:20:30.220 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e2470709c47f4141901b558f59aa40a9","UiLocales":null,"Nonce":"d7a7d30300a64caaa6c285db298468e4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e2470709c47f4141901b558f59aa40a9","nonce":"d7a7d30300a64caaa6c285db298468e4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:20:30.220 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:20:33.446 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:20:33.447 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:20:33.447 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:20:33.451 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:20:33.451 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:20:33.451 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:20:33.451 +01:00 [DBG] Start authorize callback request
2020-03-28 18:20:33.451 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:20:33.451 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:20:33.451 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:20:33.452 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:20:33.452 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e2470709c47f4141901b558f59aa40a9","UiLocales":null,"Nonce":"d7a7d30300a64caaa6c285db298468e4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"nvEpgZ_LNM0RkNvvwVq9Mw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e2470709c47f4141901b558f59aa40a9","nonce":"d7a7d30300a64caaa6c285db298468e4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:20:33.457 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:20:33.457 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:20:33.457 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:20:33.457 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:20:33.460 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:20:33.460 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:20:33.461 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e2470709c47f4141901b558f59aa40a9","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:20:33.461 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:20:34.528 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:20:34.528 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:34.529 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:34.529 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:20:34.529 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:20:34.529 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:20:34.529 +01:00 [DBG] Start discovery request
2020-03-28 18:20:34.582 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:20:34.582 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:34.582 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:34.582 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:20:34.582 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:20:34.582 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:20:34.582 +01:00 [DBG] Start key discovery request
2020-03-28 18:20:34.616 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:20:34.616 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:20:34.616 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:20:34.617 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:20:34.617 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:20:34.617 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:20:34.617 +01:00 [DBG] Start userinfo request
2020-03-28 18:20:34.617 +01:00 [DBG] Bearer token found in header
2020-03-28 18:20:34.617 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:20:34.617 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:20:34.624 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:20:34.625 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416033,"exp":1585419633,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585416033,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:20:34.626 +01:00 [DBG] Creating userinfo response
2020-03-28 18:20:34.626 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:20:34.626 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:20:34.627 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:20:34.627 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:20:34.629 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:20:34.629 +01:00 [DBG] End userinfo request
2020-03-28 18:20:34.641 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:20:34.641 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:20:34.642 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:20:34.642 +01:00 [DBG] Rendering check session result
2020-03-28 18:23:42.068 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:23:42.069 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:23:42.069 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:23:42.095 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:23:42.095 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:23:42.095 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:23:42.095 +01:00 [DBG] Start discovery request
2020-03-28 18:23:42.198 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:23:42.198 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:23:42.198 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:23:42.198 +01:00 [DBG] Rendering check session result
2020-03-28 18:23:46.301 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:23:46.301 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:23:46.301 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:23:46.301 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:23:46.301 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:23:46.301 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:23:46.301 +01:00 [DBG] Start discovery request
2020-03-28 18:23:46.394 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:23:46.394 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:23:46.394 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:23:46.394 +01:00 [DBG] Rendering check session result
2020-03-28 18:23:51.916 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:23:51.917 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:23:51.917 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:23:51.917 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:23:51.917 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:23:51.917 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:23:51.917 +01:00 [DBG] Start discovery request
2020-03-28 18:23:52.071 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:23:52.071 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:23:52.071 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:23:52.071 +01:00 [DBG] Rendering check session result
2020-03-28 18:23:58.911 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:23:58.911 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:23:58.911 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:23:58.911 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:23:58.911 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:23:58.911 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:23:58.911 +01:00 [DBG] Start discovery request
2020-03-28 18:23:58.999 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:23:58.999 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:23:59.000 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:23:59.000 +01:00 [DBG] Rendering check session result
2020-03-28 18:24:09.143 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:24:09.144 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:24:09.144 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:24:09.144 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:24:09.144 +01:00 [DBG] Start end session request validation
2020-03-28 18:24:09.144 +01:00 [DBG] Start identity token validation
2020-03-28 18:24:09.144 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:24:09.144 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:24:09.155 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:24:09.155 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416033,"exp":1585416333,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"d7a7d30300a64caaa6c285db298468e4","iat":1585416033,"at_hash":"vTgcse-4PXtApocIGU185A","s_hash":"-o4it36mQ78epgHRoZ7N3w","sid":"nvEpgZ_LNM0RkNvvwVq9Mw","sub":"test2@test.com","auth_time":1585416033,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:24:09.155 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:24:09.155 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:24:11.566 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:24:11.566 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:24:11.566 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:24:11.567 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:24:11.567 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:24:11.567 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:24:11.567 +01:00 [DBG] Start discovery request
2020-03-28 18:24:11.604 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:24:11.604 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:24:11.604 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:24:11.604 +01:00 [DBG] Start authorize request
2020-03-28 18:24:11.604 +01:00 [DBG] No user present in authorize request
2020-03-28 18:24:11.604 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:24:11.604 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:24:11.605 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:24:11.605 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"fa7d2e0d87b64b95a10f69337967aafd","UiLocales":null,"Nonce":"d9a2fc736b6a46f6a5ecb9efd098f185","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"fa7d2e0d87b64b95a10f69337967aafd","nonce":"d9a2fc736b6a46f6a5ecb9efd098f185"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:24:11.605 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:24:14.253 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:24:14.253 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:24:14.253 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:24:14.257 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:24:14.257 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:24:14.257 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:24:14.257 +01:00 [DBG] Start authorize callback request
2020-03-28 18:24:14.257 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:24:14.257 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:24:14.257 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:24:14.257 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:24:14.257 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"fa7d2e0d87b64b95a10f69337967aafd","UiLocales":null,"Nonce":"d9a2fc736b6a46f6a5ecb9efd098f185","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"fa7d2e0d87b64b95a10f69337967aafd","nonce":"d9a2fc736b6a46f6a5ecb9efd098f185"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:24:14.261 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:24:14.261 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:24:14.262 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:24:14.262 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:24:14.268 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:24:14.268 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:24:14.269 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"fa7d2e0d87b64b95a10f69337967aafd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:24:14.269 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:24:15.322 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:24:15.322 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:24:15.322 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:24:15.322 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:24:15.322 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:24:15.323 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:24:15.323 +01:00 [DBG] Start discovery request
2020-03-28 18:24:15.373 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:24:15.374 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:24:15.374 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:24:15.374 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:24:15.374 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:24:15.374 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:24:15.374 +01:00 [DBG] Start key discovery request
2020-03-28 18:24:15.416 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:24:15.416 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:24:15.416 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:24:15.416 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:24:15.416 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:24:15.416 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:24:15.416 +01:00 [DBG] Start userinfo request
2020-03-28 18:24:15.416 +01:00 [DBG] Bearer token found in header
2020-03-28 18:24:15.417 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:24:15.417 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:24:15.419 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:24:15.419 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416254,"exp":1585419854,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585416254,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:24:15.422 +01:00 [DBG] Creating userinfo response
2020-03-28 18:24:15.422 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:24:15.422 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:24:15.422 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:24:15.422 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:24:15.424 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:24:15.424 +01:00 [DBG] End userinfo request
2020-03-28 18:24:15.434 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:24:15.434 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:24:15.434 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:24:15.434 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:49.356 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:49.356 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:49.356 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:49.357 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:49.357 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:49.357 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:49.357 +01:00 [DBG] Start discovery request
2020-03-28 18:28:49.370 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:49.370 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:49.370 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:49.370 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:49.370 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:49.370 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:49.370 +01:00 [DBG] Start discovery request
2020-03-28 18:28:49.466 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:49.466 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:49.467 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:49.467 +01:00 [DBG] Start authorize request
2020-03-28 18:28:49.470 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:49.471 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:49.471 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:49.472 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:49.472 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"72a05ba098a44992b398e9f4705f3542","UiLocales":null,"Nonce":"19106a46ea2a4fbbadec94b42e014aec","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"72a05ba098a44992b398e9f4705f3542","nonce":"19106a46ea2a4fbbadec94b42e014aec"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:49.473 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:49.473 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:49.473 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:49.473 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:49.517 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:49.517 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:49.517 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:49.518 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:49.524 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:49.524 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:49.525 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"72a05ba098a44992b398e9f4705f3542","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:50.088 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:50.088 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:50.088 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:50.088 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:50.088 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:50.088 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:50.088 +01:00 [DBG] Start discovery request
2020-03-28 18:28:50.092 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:50.092 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:50.092 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:50.092 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:50.092 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:50.092 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:50.092 +01:00 [DBG] Start discovery request
2020-03-28 18:28:50.235 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:50.237 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:50.237 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:50.237 +01:00 [DBG] Start authorize request
2020-03-28 18:28:50.237 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:50.237 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:50.237 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:50.238 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:50.238 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"86599f442d8c43899abb182a914ab0bf","UiLocales":null,"Nonce":"c8a5601fba284a0aa6de6ab4cc3c36ea","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"86599f442d8c43899abb182a914ab0bf","nonce":"c8a5601fba284a0aa6de6ab4cc3c36ea"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:50.242 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:50.242 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:50.242 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:50.242 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:50.256 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:50.257 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:50.259 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"86599f442d8c43899abb182a914ab0bf","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:50.259 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:50.259 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:50.259 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:50.259 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:50.872 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:50.872 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:50.872 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:50.872 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:50.872 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:50.872 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:50.873 +01:00 [DBG] Start discovery request
2020-03-28 18:28:50.875 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:50.875 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:50.875 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:50.875 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:50.875 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:50.876 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:50.876 +01:00 [DBG] Start discovery request
2020-03-28 18:28:50.992 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:50.993 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:50.993 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:50.993 +01:00 [DBG] Start authorize request
2020-03-28 18:28:50.993 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:50.993 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:50.993 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:50.994 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:50.994 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"921f88e37f3044f3a5fc012060465f71","UiLocales":null,"Nonce":"4b9fb0ed99b242fa96eb56a09714cbf9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"921f88e37f3044f3a5fc012060465f71","nonce":"4b9fb0ed99b242fa96eb56a09714cbf9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:51.000 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:51.000 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:51.001 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:51.001 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:51.006 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:51.007 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:51.008 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"921f88e37f3044f3a5fc012060465f71","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:51.724 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:51.724 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:51.724 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:51.725 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:51.725 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:51.725 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:51.725 +01:00 [DBG] Start discovery request
2020-03-28 18:28:51.725 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:51.725 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:51.725 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:51.726 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:51.726 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:51.726 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:51.726 +01:00 [DBG] Start discovery request
2020-03-28 18:28:51.853 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:51.854 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:51.854 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:51.854 +01:00 [DBG] Start authorize request
2020-03-28 18:28:51.854 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:51.854 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:51.854 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:51.854 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:51.855 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"7f4d728672554ef48ec97ac4c356339c","UiLocales":null,"Nonce":"f6fbed6aa1e5464692eabb9110217a8d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"7f4d728672554ef48ec97ac4c356339c","nonce":"f6fbed6aa1e5464692eabb9110217a8d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:51.861 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:51.861 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:51.861 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:51.861 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:51.861 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:51.861 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:51.861 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:51.861 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:51.867 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:51.867 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:51.872 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"7f4d728672554ef48ec97ac4c356339c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:52.413 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:52.413 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:52.413 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:52.414 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:52.414 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:52.414 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:52.414 +01:00 [DBG] Start discovery request
2020-03-28 18:28:52.418 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:52.418 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:52.418 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:52.418 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:52.418 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:52.418 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:52.418 +01:00 [DBG] Start discovery request
2020-03-28 18:28:52.531 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:52.531 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:52.531 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:52.531 +01:00 [DBG] Start authorize request
2020-03-28 18:28:52.531 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:52.531 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:52.531 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:52.533 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:52.534 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"9356cba2d1cd4ff491a6e58ac471d9bc","UiLocales":null,"Nonce":"82091083f232460b86a105d312aba552","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"9356cba2d1cd4ff491a6e58ac471d9bc","nonce":"82091083f232460b86a105d312aba552"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:52.541 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:52.541 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:52.542 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:52.542 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:52.545 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:52.545 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:52.547 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"9356cba2d1cd4ff491a6e58ac471d9bc","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:52.561 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:52.561 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:52.561 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:52.561 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:53.109 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:53.109 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:53.109 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:53.110 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:53.110 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:53.110 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:53.110 +01:00 [DBG] Start discovery request
2020-03-28 18:28:53.115 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:53.115 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:53.115 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:53.116 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:53.116 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:53.116 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:53.116 +01:00 [DBG] Start discovery request
2020-03-28 18:28:53.232 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:53.232 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:53.232 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:53.232 +01:00 [DBG] Start authorize request
2020-03-28 18:28:53.232 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:53.233 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:53.233 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:53.235 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:53.235 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"db7e42a03f9e4a12a2cb585b3b020cfd","UiLocales":null,"Nonce":"98185ad4a4a2414aba5d7cbd61ce9c87","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"db7e42a03f9e4a12a2cb585b3b020cfd","nonce":"98185ad4a4a2414aba5d7cbd61ce9c87"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:53.239 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:53.239 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:53.239 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:53.239 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:53.242 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:53.242 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:53.243 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"db7e42a03f9e4a12a2cb585b3b020cfd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:53.254 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:53.254 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:53.254 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:53.254 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:53.706 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:53.706 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:53.706 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:53.706 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:53.706 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:53.706 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:53.706 +01:00 [DBG] Start discovery request
2020-03-28 18:28:53.710 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:53.710 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:53.710 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:53.710 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:53.710 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:53.710 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:53.710 +01:00 [DBG] Start discovery request
2020-03-28 18:28:53.831 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:53.832 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:53.832 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:53.832 +01:00 [DBG] Start authorize request
2020-03-28 18:28:53.832 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:53.832 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:53.832 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:53.833 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:53.833 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"15659b71c46842d2aecc1beec56f32cd","UiLocales":null,"Nonce":"72bda009be1b409e800563be31baf084","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"15659b71c46842d2aecc1beec56f32cd","nonce":"72bda009be1b409e800563be31baf084"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:53.841 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:53.841 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:53.841 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:53.841 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:53.841 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:53.841 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:53.841 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:53.842 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:53.854 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:53.854 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:53.856 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"15659b71c46842d2aecc1beec56f32cd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:54.411 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:54.412 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:54.412 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:54.413 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:54.413 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:54.413 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:54.413 +01:00 [DBG] Start discovery request
2020-03-28 18:28:54.421 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:54.421 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:54.421 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:54.422 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:54.422 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:54.422 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:54.422 +01:00 [DBG] Start discovery request
2020-03-28 18:28:54.565 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:54.566 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:54.567 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:54.567 +01:00 [DBG] Start authorize request
2020-03-28 18:28:54.567 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:54.567 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:54.568 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:54.569 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:54.569 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"8cb4855f1d004058946f3070d70b5c98","UiLocales":null,"Nonce":"fb029688b37e4222a65fb45f2cc80cf3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"8cb4855f1d004058946f3070d70b5c98","nonce":"fb029688b37e4222a65fb45f2cc80cf3"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:54.572 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:54.572 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:54.572 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:54.572 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:54.575 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:54.575 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:54.577 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"8cb4855f1d004058946f3070d70b5c98","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:54.592 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:54.592 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:54.592 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:54.592 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:55.040 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:55.040 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:55.040 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:55.041 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:55.041 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:55.041 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:55.041 +01:00 [DBG] Start discovery request
2020-03-28 18:28:55.044 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:55.044 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:55.044 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:55.044 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:55.044 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:55.044 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:55.044 +01:00 [DBG] Start discovery request
2020-03-28 18:28:55.245 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:55.245 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:55.245 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:55.245 +01:00 [DBG] Start authorize request
2020-03-28 18:28:55.245 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:55.245 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:55.246 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:55.246 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:55.246 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e934787cff944e3b8f32dff4ba15dd66","UiLocales":null,"Nonce":"21278f26d0dc4cfcb7f1b5906a4508a2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e934787cff944e3b8f32dff4ba15dd66","nonce":"21278f26d0dc4cfcb7f1b5906a4508a2"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:55.254 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:55.254 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:55.254 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:55.254 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:55.257 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:55.257 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:55.258 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e934787cff944e3b8f32dff4ba15dd66","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:55.269 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:55.269 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:55.269 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:55.269 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:55.850 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:55.850 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:55.850 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:55.850 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:55.850 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:55.850 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:55.850 +01:00 [DBG] Start discovery request
2020-03-28 18:28:55.853 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:55.853 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:55.853 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:55.853 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:55.853 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:55.853 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:55.853 +01:00 [DBG] Start discovery request
2020-03-28 18:28:55.985 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:55.985 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:55.985 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:55.985 +01:00 [DBG] Start authorize request
2020-03-28 18:28:55.986 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:55.986 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:55.986 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:55.986 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:55.987 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"8fee25a40d35499fbdc9f6116b7ccfde","UiLocales":null,"Nonce":"6bbd728e8299448ca2360ec7a2717942","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"8fee25a40d35499fbdc9f6116b7ccfde","nonce":"6bbd728e8299448ca2360ec7a2717942"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:55.993 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:55.993 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:55.993 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:55.993 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:55.995 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:55.995 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:55.997 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"8fee25a40d35499fbdc9f6116b7ccfde","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:56.006 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:56.006 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:56.006 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:56.006 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:56.451 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:56.451 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:56.451 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:56.451 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:56.451 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:56.451 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:56.451 +01:00 [DBG] Start discovery request
2020-03-28 18:28:56.455 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:56.455 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:56.455 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:56.455 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:56.455 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:56.455 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:56.455 +01:00 [DBG] Start discovery request
2020-03-28 18:28:56.592 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:56.593 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:56.593 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:56.593 +01:00 [DBG] Start authorize request
2020-03-28 18:28:56.593 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:56.593 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:56.593 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:56.593 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:56.593 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"0cbe5448941c4deea952de800180f95f","UiLocales":null,"Nonce":"ad5442a5c99744558e70265c1e165bc9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"0cbe5448941c4deea952de800180f95f","nonce":"ad5442a5c99744558e70265c1e165bc9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:56.596 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:56.596 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:56.596 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:56.596 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:56.603 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:56.603 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:56.604 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"0cbe5448941c4deea952de800180f95f","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:56.613 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:56.613 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:56.613 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:56.613 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:57.104 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:57.104 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:57.104 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:57.104 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:57.105 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:57.105 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:57.105 +01:00 [DBG] Start discovery request
2020-03-28 18:28:57.124 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:57.124 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:57.124 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:57.124 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:57.124 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:57.125 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:57.125 +01:00 [DBG] Start discovery request
2020-03-28 18:28:57.285 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:57.286 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:57.286 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:57.286 +01:00 [DBG] Start authorize request
2020-03-28 18:28:57.287 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:57.287 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:57.287 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:57.289 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:57.289 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"09c6d89a30d140aba7363fc90fc88788","UiLocales":null,"Nonce":"3dc98e05a0f74545a79eff425ffefabd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"09c6d89a30d140aba7363fc90fc88788","nonce":"3dc98e05a0f74545a79eff425ffefabd"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:57.294 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:57.294 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:57.294 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:57.294 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:57.303 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:57.303 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:57.305 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"09c6d89a30d140aba7363fc90fc88788","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:57.310 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:57.310 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:57.310 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:57.310 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:57.758 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:57.758 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:57.759 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:57.759 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:57.760 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:57.761 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:57.761 +01:00 [DBG] Start discovery request
2020-03-28 18:28:57.766 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:57.766 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:57.766 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:57.767 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:57.767 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:57.767 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:57.767 +01:00 [DBG] Start discovery request
2020-03-28 18:28:57.883 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:57.883 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:57.884 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:57.884 +01:00 [DBG] Start authorize request
2020-03-28 18:28:57.884 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:57.884 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:57.884 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:57.885 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:57.885 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"fda2d1b2b62147ffa70f165f9c2321e6","UiLocales":null,"Nonce":"540fb3c4931049a49d98c007f5011b4d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"fda2d1b2b62147ffa70f165f9c2321e6","nonce":"540fb3c4931049a49d98c007f5011b4d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:57.891 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:57.891 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:57.891 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:57.891 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:57.894 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:57.894 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:57.896 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"fda2d1b2b62147ffa70f165f9c2321e6","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:57.902 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:57.902 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:57.902 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:57.902 +01:00 [DBG] Rendering check session result
2020-03-28 18:28:59.133 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:59.133 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:59.133 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:59.133 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:59.133 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:59.133 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:59.133 +01:00 [DBG] Start discovery request
2020-03-28 18:28:59.137 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:28:59.137 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:28:59.137 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:28:59.137 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:28:59.137 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:28:59.137 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:28:59.137 +01:00 [DBG] Start discovery request
2020-03-28 18:28:59.242 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:28:59.242 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:28:59.242 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:28:59.242 +01:00 [DBG] Start authorize request
2020-03-28 18:28:59.242 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:28:59.242 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:28:59.242 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:28:59.243 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:28:59.243 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"ed3fc10344b8432095a1e3c4b47c0cbe","UiLocales":null,"Nonce":"9c33f40a077342fc9684fa81524a9a6f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"ed3fc10344b8432095a1e3c4b47c0cbe","nonce":"9c33f40a077342fc9684fa81524a9a6f"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:28:59.248 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:28:59.249 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:28:59.249 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:28:59.249 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:28:59.255 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:28:59.255 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:28:59.256 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"ed3fc10344b8432095a1e3c4b47c0cbe","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:28:59.270 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:28:59.270 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:28:59.270 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:28:59.270 +01:00 [DBG] Rendering check session result
2020-03-28 18:29:00.119 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:00.119 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:00.119 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:00.119 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:00.120 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:00.120 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:00.120 +01:00 [DBG] Start discovery request
2020-03-28 18:29:00.122 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:00.122 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:00.122 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:00.122 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:00.122 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:00.122 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:00.123 +01:00 [DBG] Start discovery request
2020-03-28 18:29:00.266 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:00.267 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:00.267 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:00.267 +01:00 [DBG] Start authorize request
2020-03-28 18:29:00.267 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:00.267 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:00.267 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:00.268 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:00.268 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"c2b55fefce5747dfbfc591d6b5ffee40","UiLocales":null,"Nonce":"14dfb26eb0244130bcae7a726984b0d0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"c2b55fefce5747dfbfc591d6b5ffee40","nonce":"14dfb26eb0244130bcae7a726984b0d0"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:00.273 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:00.274 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:00.274 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:00.274 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:00.277 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:00.277 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:00.280 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"c2b55fefce5747dfbfc591d6b5ffee40","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:00.989 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:00.990 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:00.990 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:00.990 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:00.990 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:00.990 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:00.990 +01:00 [DBG] Start discovery request
2020-03-28 18:29:00.996 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:00.996 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:00.996 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:00.996 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:00.996 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:00.996 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:00.997 +01:00 [DBG] Start discovery request
2020-03-28 18:29:01.125 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:01.125 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:01.126 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:01.126 +01:00 [DBG] Start authorize request
2020-03-28 18:29:01.126 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:01.126 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:01.126 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:01.128 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:01.128 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"27c30066f55b4bbea67a161078331945","UiLocales":null,"Nonce":"d6ce4f3f3d2d46a793da86e3af85faba","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"27c30066f55b4bbea67a161078331945","nonce":"d6ce4f3f3d2d46a793da86e3af85faba"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:01.135 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:01.135 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:01.135 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:01.135 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:01.138 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:01.139 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:01.140 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"27c30066f55b4bbea67a161078331945","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:01.175 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:29:01.176 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:29:01.176 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:29:01.176 +01:00 [DBG] Rendering check session result
2020-03-28 18:29:01.669 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:01.669 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:01.670 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:01.670 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:01.670 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:01.670 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:01.670 +01:00 [DBG] Start discovery request
2020-03-28 18:29:01.673 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:01.673 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:01.673 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:01.673 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:01.674 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:01.674 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:01.674 +01:00 [DBG] Start discovery request
2020-03-28 18:29:01.795 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:01.796 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:01.796 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:01.797 +01:00 [DBG] Start authorize request
2020-03-28 18:29:01.797 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:01.798 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:01.799 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:01.800 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:01.800 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"3305a335a605418b9a612a882d036885","UiLocales":null,"Nonce":"782d91567ac549ca9b99aa83a8ee1ab0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"3305a335a605418b9a612a882d036885","nonce":"782d91567ac549ca9b99aa83a8ee1ab0"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:01.800 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:29:01.800 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:29:01.800 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:29:01.800 +01:00 [DBG] Rendering check session result
2020-03-28 18:29:01.805 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:01.805 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:01.805 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:01.805 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:01.808 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:01.808 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:01.809 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"3305a335a605418b9a612a882d036885","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:02.440 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:02.441 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:02.441 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:02.441 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:02.441 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:02.441 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:02.441 +01:00 [DBG] Start discovery request
2020-03-28 18:29:02.445 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:02.446 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:02.446 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:02.447 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:02.447 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:02.447 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:02.447 +01:00 [DBG] Start discovery request
2020-03-28 18:29:02.558 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:02.558 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:02.558 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:02.558 +01:00 [DBG] Start authorize request
2020-03-28 18:29:02.558 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:02.558 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:02.559 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:02.559 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:02.559 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"07cf13accd6e4eaea138aa854bc3caa9","UiLocales":null,"Nonce":"19047958a25f44c29cc01fb4949751dc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"S4fTDuf4YgklgukKcAB9Gw","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"07cf13accd6e4eaea138aa854bc3caa9","nonce":"19047958a25f44c29cc01fb4949751dc"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:02.565 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:02.565 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:02.565 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:02.565 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:02.568 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:02.569 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:02.570 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"07cf13accd6e4eaea138aa854bc3caa9","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:02.577 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:29:02.578 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:29:02.578 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:29:02.578 +01:00 [DBG] Rendering check session result
2020-03-28 18:29:04.583 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:29:04.584 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:29:04.584 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:29:04.584 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:29:04.584 +01:00 [DBG] Start end session request validation
2020-03-28 18:29:04.584 +01:00 [DBG] Start identity token validation
2020-03-28 18:29:04.584 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:04.584 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:29:04.593 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:29:04.593 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416254,"exp":1585416554,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"d9a2fc736b6a46f6a5ecb9efd098f185","iat":1585416254,"at_hash":"eFczAH-k5uXnUD0eByZPGA","s_hash":"Xlf_7qpn-H4aSoOjij4q4g","sid":"S4fTDuf4YgklgukKcAB9Gw","sub":"test2@test.com","auth_time":1585416254,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:29:04.593 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:29:04.593 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:29:07.168 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:07.168 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:07.168 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:07.168 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:07.168 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:07.168 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:07.168 +01:00 [DBG] Start discovery request
2020-03-28 18:29:07.194 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:07.194 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:07.194 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:07.194 +01:00 [DBG] Start authorize request
2020-03-28 18:29:07.194 +01:00 [DBG] No user present in authorize request
2020-03-28 18:29:07.195 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:07.195 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:07.195 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:07.195 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"5fae155cd0b847d898454af541ab8b45","UiLocales":null,"Nonce":"632b9bc1d2cc4802aec40d06f6db93fd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"5fae155cd0b847d898454af541ab8b45","nonce":"632b9bc1d2cc4802aec40d06f6db93fd"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:07.195 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:29:10.241 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:29:10.241 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:29:10.241 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:29:10.245 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:29:10.245 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:29:10.246 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:29:10.246 +01:00 [DBG] Start authorize callback request
2020-03-28 18:29:10.246 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:10.246 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:10.246 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:10.246 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:10.246 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"5fae155cd0b847d898454af541ab8b45","UiLocales":null,"Nonce":"632b9bc1d2cc4802aec40d06f6db93fd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"5fae155cd0b847d898454af541ab8b45","nonce":"632b9bc1d2cc4802aec40d06f6db93fd"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:10.249 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:10.249 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:10.249 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:10.250 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:10.252 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:10.252 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:10.253 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"5fae155cd0b847d898454af541ab8b45","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:10.253 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:29:11.407 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:11.407 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:11.407 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:11.407 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:11.407 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:11.407 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:11.407 +01:00 [DBG] Start discovery request
2020-03-28 18:29:11.469 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:11.470 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:11.470 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:11.470 +01:00 [DBG] Start authorize request
2020-03-28 18:29:11.470 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:11.470 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:11.470 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:11.470 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:11.470 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"02d81439856043dda4955150b8b99672","UiLocales":null,"Nonce":"8b538c21b5424887989851405dd5a1fd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"02d81439856043dda4955150b8b99672","nonce":"8b538c21b5424887989851405dd5a1fd"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:11.477 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:11.478 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:11.478 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:11.478 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:11.483 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:11.483 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:11.485 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"02d81439856043dda4955150b8b99672","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:11.998 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:11.998 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:11.998 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:11.999 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:11.999 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:11.999 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:11.999 +01:00 [DBG] Start discovery request
2020-03-28 18:29:12.071 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:12.071 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:12.072 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:12.072 +01:00 [DBG] Start authorize request
2020-03-28 18:29:12.072 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:12.072 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:12.072 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:12.072 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:12.072 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"8c073eb5921b4b1e9a5b6c8958c4e803","UiLocales":null,"Nonce":"a8328c750c0a4e34844be90cd6779b6d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"8c073eb5921b4b1e9a5b6c8958c4e803","nonce":"a8328c750c0a4e34844be90cd6779b6d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:12.079 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:12.079 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:12.079 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:12.080 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:12.089 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:12.090 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:12.091 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"8c073eb5921b4b1e9a5b6c8958c4e803","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:12.603 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:12.603 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:12.603 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:12.604 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:12.604 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:12.604 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:12.604 +01:00 [DBG] Start discovery request
2020-03-28 18:29:12.717 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:12.717 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:12.718 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:12.718 +01:00 [DBG] Start authorize request
2020-03-28 18:29:12.718 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:12.718 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:12.718 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:12.719 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:12.719 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"c4dde520acfd4fffb613367acf9f97ea","UiLocales":null,"Nonce":"42803d8076fd4262b1046014ceedace4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"c4dde520acfd4fffb613367acf9f97ea","nonce":"42803d8076fd4262b1046014ceedace4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:12.726 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:12.727 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:12.728 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:12.728 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:12.736 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:12.736 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:12.738 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"c4dde520acfd4fffb613367acf9f97ea","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:13.217 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:13.218 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:13.218 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:13.218 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:13.218 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:13.218 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:13.218 +01:00 [DBG] Start discovery request
2020-03-28 18:29:13.290 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:13.290 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:13.290 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:13.290 +01:00 [DBG] Start authorize request
2020-03-28 18:29:13.290 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:13.290 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:13.291 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:13.291 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:13.291 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"6fdac17bfc054cd7b66bcab963ac02eb","UiLocales":null,"Nonce":"41873cf340134cfba657b2050ca95581","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"6fdac17bfc054cd7b66bcab963ac02eb","nonce":"41873cf340134cfba657b2050ca95581"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:13.297 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:13.298 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:13.298 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:13.298 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:13.305 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:13.305 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:13.306 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"6fdac17bfc054cd7b66bcab963ac02eb","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:13.807 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:13.808 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:13.808 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:13.808 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:13.809 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:13.809 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:13.809 +01:00 [DBG] Start discovery request
2020-03-28 18:29:13.914 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:13.914 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:13.914 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:13.914 +01:00 [DBG] Start authorize request
2020-03-28 18:29:13.914 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:13.914 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:13.914 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:13.914 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:13.914 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"7b93964e1aa7496982dc9ac6aa1c7250","UiLocales":null,"Nonce":"e1362d348cb24371a943bf0e9e1fdd6f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"7b93964e1aa7496982dc9ac6aa1c7250","nonce":"e1362d348cb24371a943bf0e9e1fdd6f"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:13.920 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:13.921 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:13.921 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:13.921 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:13.924 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:13.924 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:13.927 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"7b93964e1aa7496982dc9ac6aa1c7250","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:14.453 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:14.453 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:14.453 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:14.453 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:14.453 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:14.453 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:14.453 +01:00 [DBG] Start discovery request
2020-03-28 18:29:14.522 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:14.527 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:14.527 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:14.527 +01:00 [DBG] Start authorize request
2020-03-28 18:29:14.529 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:14.529 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:14.530 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:14.531 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:14.531 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"b1379325940b49e98e97c9d4cf56ca0a","UiLocales":null,"Nonce":"3f27316be2ba42b081a8a3fc483254a7","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"b1379325940b49e98e97c9d4cf56ca0a","nonce":"3f27316be2ba42b081a8a3fc483254a7"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:14.537 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:14.537 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:14.537 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:14.537 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:14.542 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:14.542 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:14.544 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"b1379325940b49e98e97c9d4cf56ca0a","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:15.054 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:15.055 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:15.055 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:15.055 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:15.055 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:15.055 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:15.055 +01:00 [DBG] Start discovery request
2020-03-28 18:29:15.129 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:15.129 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:15.129 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:15.129 +01:00 [DBG] Start authorize request
2020-03-28 18:29:15.130 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:15.130 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:15.130 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:15.130 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:15.131 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"6ce8c4cc7ec74128a6c7b34e88a73696","UiLocales":null,"Nonce":"fff615633865448f89224deea6d5923d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"6ce8c4cc7ec74128a6c7b34e88a73696","nonce":"fff615633865448f89224deea6d5923d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:15.137 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:15.137 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:15.137 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:15.137 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:15.140 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:15.140 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:15.142 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"6ce8c4cc7ec74128a6c7b34e88a73696","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:15.646 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:15.646 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:15.646 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:15.646 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:15.646 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:15.646 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:15.646 +01:00 [DBG] Start discovery request
2020-03-28 18:29:15.709 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:15.709 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:15.709 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:15.709 +01:00 [DBG] Start authorize request
2020-03-28 18:29:15.709 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:15.709 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:15.709 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:15.710 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:15.710 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"34d059275a354a67b6f9c4fbfa3bb261","UiLocales":null,"Nonce":"a9e93f4a81e24c8fbdc4a16933acc249","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"34d059275a354a67b6f9c4fbfa3bb261","nonce":"a9e93f4a81e24c8fbdc4a16933acc249"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:15.714 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:15.714 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:15.714 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:15.714 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:15.718 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:15.718 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:15.720 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"34d059275a354a67b6f9c4fbfa3bb261","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:16.211 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:16.211 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:16.211 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:16.211 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:16.211 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:16.211 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:16.211 +01:00 [DBG] Start discovery request
2020-03-28 18:29:16.280 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:16.280 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:16.280 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:16.280 +01:00 [DBG] Start authorize request
2020-03-28 18:29:16.280 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:16.280 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:16.280 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:16.281 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:16.281 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"ea8f62f626354b6ab1cf539813b45c6d","UiLocales":null,"Nonce":"77171ddca75841bb960219e5b12ee07b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"ea8f62f626354b6ab1cf539813b45c6d","nonce":"77171ddca75841bb960219e5b12ee07b"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:16.287 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:16.287 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:16.287 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:16.287 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:16.291 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:16.291 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:16.294 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"ea8f62f626354b6ab1cf539813b45c6d","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:16.859 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:16.859 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:16.859 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:16.860 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:16.860 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:16.860 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:16.860 +01:00 [DBG] Start discovery request
2020-03-28 18:29:16.932 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:16.932 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:16.932 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:16.932 +01:00 [DBG] Start authorize request
2020-03-28 18:29:16.933 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:16.933 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:16.933 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:16.933 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:16.934 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"87a928d46ea1448ba83aa6406ff27f44","UiLocales":null,"Nonce":"edcc6027195e4975a6b44dec87f1f5a9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"87a928d46ea1448ba83aa6406ff27f44","nonce":"edcc6027195e4975a6b44dec87f1f5a9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:16.942 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:16.943 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:16.943 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:16.943 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:16.947 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:16.947 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:16.948 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"87a928d46ea1448ba83aa6406ff27f44","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:17.464 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:17.464 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:17.464 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:17.464 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:17.465 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:17.465 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:17.465 +01:00 [DBG] Start discovery request
2020-03-28 18:29:17.572 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:17.573 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:17.574 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:17.574 +01:00 [DBG] Start authorize request
2020-03-28 18:29:17.574 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:17.574 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:17.574 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:17.576 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:17.576 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"395512aeec0c4d00a81b46ae4493443a","UiLocales":null,"Nonce":"0bdf29346f37454eb78d7eef6578998c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"395512aeec0c4d00a81b46ae4493443a","nonce":"0bdf29346f37454eb78d7eef6578998c"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:17.580 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:17.581 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:17.581 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:17.581 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:17.585 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:17.585 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:17.587 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"395512aeec0c4d00a81b46ae4493443a","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:18.067 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:18.067 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:18.067 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:18.067 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:18.067 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:18.067 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:18.067 +01:00 [DBG] Start discovery request
2020-03-28 18:29:18.149 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:18.150 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:18.150 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:18.150 +01:00 [DBG] Start authorize request
2020-03-28 18:29:18.150 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:18.150 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:18.150 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:18.151 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:18.151 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"afb37f91c2d04c40927e42cdec79e70f","UiLocales":null,"Nonce":"a85c42bb3a574d388e84cb1598f03e19","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"afb37f91c2d04c40927e42cdec79e70f","nonce":"a85c42bb3a574d388e84cb1598f03e19"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:18.157 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:18.158 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:18.158 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:18.159 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:18.165 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:18.165 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:18.166 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"afb37f91c2d04c40927e42cdec79e70f","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:18.700 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:18.700 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:18.700 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:18.700 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:18.700 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:18.700 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:18.700 +01:00 [DBG] Start discovery request
2020-03-28 18:29:18.770 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:18.770 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:18.770 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:18.770 +01:00 [DBG] Start authorize request
2020-03-28 18:29:18.770 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:18.770 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:18.770 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:18.770 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:18.770 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"4797c2d8c1f743489fa67858de6be190","UiLocales":null,"Nonce":"d436f20463cf4eeaa06778605cf536e6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"4797c2d8c1f743489fa67858de6be190","nonce":"d436f20463cf4eeaa06778605cf536e6"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:18.776 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:18.776 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:18.776 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:18.776 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:18.782 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:18.782 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:18.785 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"4797c2d8c1f743489fa67858de6be190","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:19.276 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:19.276 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:19.276 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:19.277 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:19.277 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:19.277 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:19.277 +01:00 [DBG] Start discovery request
2020-03-28 18:29:19.376 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:19.377 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:19.377 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:19.377 +01:00 [DBG] Start authorize request
2020-03-28 18:29:19.377 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:19.377 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:19.377 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:19.378 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:19.378 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"51b23e7a40eb4bb1ac9c6fb021864e9f","UiLocales":null,"Nonce":"bed19624c67c4445aab36f8c949f492a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"51b23e7a40eb4bb1ac9c6fb021864e9f","nonce":"bed19624c67c4445aab36f8c949f492a"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:19.382 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:19.382 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:19.382 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:19.383 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:19.386 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:19.386 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:19.388 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"51b23e7a40eb4bb1ac9c6fb021864e9f","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:19.862 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:19.863 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:19.863 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:19.863 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:19.863 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:19.863 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:19.863 +01:00 [DBG] Start discovery request
2020-03-28 18:29:19.942 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:19.942 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:19.942 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:19.942 +01:00 [DBG] Start authorize request
2020-03-28 18:29:19.943 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:19.943 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:19.943 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:19.943 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:19.943 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"5ac3c5be9a7e4a0e9ddfa041f24be0ec","UiLocales":null,"Nonce":"f4f538b9e5ec4ea684cf15bdfbc8c9e4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"5ac3c5be9a7e4a0e9ddfa041f24be0ec","nonce":"f4f538b9e5ec4ea684cf15bdfbc8c9e4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:19.948 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:19.948 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:19.948 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:19.948 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:19.953 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:19.953 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:19.954 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"5ac3c5be9a7e4a0e9ddfa041f24be0ec","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:20.469 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:20.469 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:20.469 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:20.469 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:20.469 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:20.469 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:20.469 +01:00 [DBG] Start discovery request
2020-03-28 18:29:20.604 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:20.605 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:20.605 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:20.605 +01:00 [DBG] Start authorize request
2020-03-28 18:29:20.605 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:20.605 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:20.605 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:20.607 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:20.608 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"262676ef5d4e4e34a3ed1a11f2011e0c","UiLocales":null,"Nonce":"9e298117200d49389c8bf5765a0643f9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"262676ef5d4e4e34a3ed1a11f2011e0c","nonce":"9e298117200d49389c8bf5765a0643f9"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:20.612 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:20.612 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:20.613 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:20.613 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:20.618 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:20.618 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:20.620 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"262676ef5d4e4e34a3ed1a11f2011e0c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:21.081 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:21.081 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:21.081 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:21.081 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:21.081 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:21.081 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:21.082 +01:00 [DBG] Start discovery request
2020-03-28 18:29:21.169 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:21.170 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:21.170 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:21.170 +01:00 [DBG] Start authorize request
2020-03-28 18:29:21.170 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:21.170 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:21.170 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:21.170 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:21.171 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"bdc8b9eba3d04248a901befdca0b0992","UiLocales":null,"Nonce":"f4d40df2bd45495f8001a662d96b662d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"bdc8b9eba3d04248a901befdca0b0992","nonce":"f4d40df2bd45495f8001a662d96b662d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:21.182 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:21.182 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:21.183 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:21.183 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:21.187 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:21.187 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:21.188 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"bdc8b9eba3d04248a901befdca0b0992","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:21.696 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:21.696 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:21.696 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:21.696 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:21.696 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:21.697 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:21.697 +01:00 [DBG] Start discovery request
2020-03-28 18:29:58.032 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:58.033 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:58.033 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:58.033 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:58.033 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:58.033 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:58.033 +01:00 [DBG] Start discovery request
2020-03-28 18:29:58.099 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:58.099 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:58.099 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:58.100 +01:00 [DBG] Start authorize request
2020-03-28 18:29:58.100 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:58.100 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:58.100 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:58.101 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:58.101 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"9dc1866fe6eb461db62048a4553e86f9","UiLocales":null,"Nonce":"719cd915042c402cb048547f1c06283d","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"9dc1866fe6eb461db62048a4553e86f9","nonce":"719cd915042c402cb048547f1c06283d"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:58.108 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:58.108 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:58.108 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:58.108 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:58.129 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:58.130 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:58.131 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"9dc1866fe6eb461db62048a4553e86f9","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:58.954 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:58.954 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:58.954 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:58.954 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:58.954 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:58.954 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:58.955 +01:00 [DBG] Start discovery request
2020-03-28 18:29:59.090 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:59.090 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:59.090 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:59.090 +01:00 [DBG] Start authorize request
2020-03-28 18:29:59.090 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:59.090 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:59.090 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:59.091 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:59.091 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"a62eb58081074547ab70655e19444bcd","UiLocales":null,"Nonce":"d90db12762db43d8aca9ff513384ef44","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"a62eb58081074547ab70655e19444bcd","nonce":"d90db12762db43d8aca9ff513384ef44"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:59.097 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:59.097 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:59.097 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:59.097 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:59.103 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:59.103 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:59.105 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"a62eb58081074547ab70655e19444bcd","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:29:59.817 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:29:59.817 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:29:59.817 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:29:59.817 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:29:59.817 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:29:59.817 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:29:59.818 +01:00 [DBG] Start discovery request
2020-03-28 18:29:59.907 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:29:59.908 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:29:59.908 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:29:59.908 +01:00 [DBG] Start authorize request
2020-03-28 18:29:59.908 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:29:59.908 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:29:59.908 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:29:59.909 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:29:59.909 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"70d566a221fb4ea68dd36766cadedc22","UiLocales":null,"Nonce":"c1f91491a2e94fbb8837ca780ec83268","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"70d566a221fb4ea68dd36766cadedc22","nonce":"c1f91491a2e94fbb8837ca780ec83268"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:29:59.916 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:29:59.916 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:29:59.916 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:29:59.916 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:29:59.919 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:29:59.919 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:29:59.921 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"70d566a221fb4ea68dd36766cadedc22","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:00.903 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:00.903 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:00.903 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:00.904 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:00.904 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:00.904 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:00.904 +01:00 [DBG] Start discovery request
2020-03-28 18:30:01.036 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:01.037 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:01.037 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:01.037 +01:00 [DBG] Start authorize request
2020-03-28 18:30:01.037 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:01.037 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:01.038 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:01.040 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:01.040 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"1e69e175048d4fc48a213dc4cef4fb62","UiLocales":null,"Nonce":"4bc4008d50c34491a36e99cc085f57ee","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"1e69e175048d4fc48a213dc4cef4fb62","nonce":"4bc4008d50c34491a36e99cc085f57ee"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:01.049 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:01.049 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:01.049 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:01.049 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:01.054 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:01.054 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:01.055 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"1e69e175048d4fc48a213dc4cef4fb62","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:01.580 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:01.581 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:01.581 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:01.581 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:01.581 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:01.581 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:01.581 +01:00 [DBG] Start discovery request
2020-03-28 18:30:01.703 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:01.704 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:01.704 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:01.704 +01:00 [DBG] Start authorize request
2020-03-28 18:30:01.706 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:01.706 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:01.707 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:01.708 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:01.708 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"2c3731046fa7410ebefe051c65a71b15","UiLocales":null,"Nonce":"201847919ebf4481ade8037ca12948b4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"2c3731046fa7410ebefe051c65a71b15","nonce":"201847919ebf4481ade8037ca12948b4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:01.719 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:01.726 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:01.727 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:01.727 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:01.738 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:01.738 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:01.741 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"2c3731046fa7410ebefe051c65a71b15","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:02.903 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:02.903 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:02.903 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:02.904 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:02.904 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:02.904 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:02.904 +01:00 [DBG] Start discovery request
2020-03-28 18:30:03.006 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:03.007 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:03.007 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:03.007 +01:00 [DBG] Start authorize request
2020-03-28 18:30:03.007 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:03.007 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:03.007 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:03.007 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:03.008 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"44a06600d3b44452ab46f66511272f33","UiLocales":null,"Nonce":"acd5ba65dc45444db0ad9f282cee0dd6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"44a06600d3b44452ab46f66511272f33","nonce":"acd5ba65dc45444db0ad9f282cee0dd6"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:03.020 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:03.020 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:03.020 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:03.020 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:03.025 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:03.026 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:03.030 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"44a06600d3b44452ab46f66511272f33","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:04.196 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:04.196 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:04.196 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:04.196 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:04.196 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:04.196 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:04.197 +01:00 [DBG] Start discovery request
2020-03-28 18:30:04.316 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:04.316 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:04.317 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:04.317 +01:00 [DBG] Start authorize request
2020-03-28 18:30:04.317 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:04.317 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:04.317 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:04.318 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:04.318 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e0d093e1425441e98def4dfa9e44b660","UiLocales":null,"Nonce":"9a5e61378f17467abe7f266ae2777a28","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e0d093e1425441e98def4dfa9e44b660","nonce":"9a5e61378f17467abe7f266ae2777a28"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:04.334 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:04.335 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:04.335 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:04.335 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:04.347 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:04.347 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:04.349 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e0d093e1425441e98def4dfa9e44b660","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:05.102 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:05.102 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:05.102 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:05.103 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:05.103 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:05.103 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:05.103 +01:00 [DBG] Start discovery request
2020-03-28 18:30:05.196 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:05.196 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:05.196 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:05.196 +01:00 [DBG] Start authorize request
2020-03-28 18:30:05.197 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:05.197 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:05.197 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:05.197 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:05.197 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"ae687635c6654fb998f4529d50f7a556","UiLocales":null,"Nonce":"86a6a9283cb044f097619e35146e8b3c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"ae687635c6654fb998f4529d50f7a556","nonce":"86a6a9283cb044f097619e35146e8b3c"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:05.202 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:05.202 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:05.202 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:05.202 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:05.206 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:05.207 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:05.210 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"ae687635c6654fb998f4529d50f7a556","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:05.852 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:05.852 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:05.852 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:05.852 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:05.852 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:05.853 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:05.853 +01:00 [DBG] Start discovery request
2020-03-28 18:30:05.949 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:30:05.950 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:30:05.950 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:30:05.950 +01:00 [DBG] Start authorize request
2020-03-28 18:30:05.950 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:30:05.950 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:30:05.950 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:05.951 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:30:05.951 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"23bc31ac2bd04f348632f0b10ebe2835","UiLocales":null,"Nonce":"df20bdf621b04219a26f37112d63b963","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"23bc31ac2bd04f348632f0b10ebe2835","nonce":"df20bdf621b04219a26f37112d63b963"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:30:05.963 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:30:05.963 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:30:05.963 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:30:05.963 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:30:05.967 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:30:05.967 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:30:05.969 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"23bc31ac2bd04f348632f0b10ebe2835","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:30:06.859 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:06.859 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:06.859 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:06.863 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:06.863 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:06.863 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:06.863 +01:00 [DBG] Start discovery request
2020-03-28 18:30:06.965 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:30:06.965 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:06.966 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:06.966 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:30:06.966 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:30:06.966 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:30:06.966 +01:00 [DBG] Start key discovery request
2020-03-28 18:30:07.016 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:30:07.017 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:07.017 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:07.017 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:30:07.017 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:30:07.017 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:30:07.017 +01:00 [DBG] Start userinfo request
2020-03-28 18:30:07.017 +01:00 [DBG] Bearer token found in header
2020-03-28 18:30:07.018 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:07.018 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:30:07.021 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:30:07.022 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416605,"exp":1585420205,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585416550,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:30:07.024 +01:00 [DBG] Creating userinfo response
2020-03-28 18:30:07.024 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:30:07.024 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:30:07.024 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:30:07.024 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:30:07.027 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:30:07.027 +01:00 [DBG] End userinfo request
2020-03-28 18:30:07.035 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:30:07.035 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:30:07.035 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:30:07.035 +01:00 [DBG] Rendering check session result
2020-03-28 18:30:10.658 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:30:10.659 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:30:10.659 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:30:10.659 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:30:10.659 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:30:10.659 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:30:10.660 +01:00 [DBG] Start discovery request
2020-03-28 18:30:10.762 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:30:10.762 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:30:10.762 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:30:10.762 +01:00 [DBG] Rendering check session result
2020-03-28 18:31:24.115 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:31:24.115 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:31:24.115 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:31:24.116 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:31:24.117 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:31:24.118 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:31:24.118 +01:00 [DBG] Start discovery request
2020-03-28 18:31:24.217 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:31:24.217 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:31:24.217 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:31:24.218 +01:00 [DBG] Rendering check session result
2020-03-28 18:31:35.751 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:31:35.751 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:31:35.751 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:31:35.752 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:31:35.752 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:31:35.752 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:31:35.752 +01:00 [DBG] Start discovery request
2020-03-28 18:31:35.810 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:31:35.810 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:31:35.810 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:31:35.810 +01:00 [DBG] Rendering check session result
2020-03-28 18:32:26.273 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:32:26.275 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:32:26.275 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:32:26.275 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:32:26.275 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:32:26.279 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:32:26.280 +01:00 [DBG] Start discovery request
2020-03-28 18:32:26.388 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:32:26.388 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:32:26.388 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:32:26.388 +01:00 [DBG] Rendering check session result
2020-03-28 18:32:35.491 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:32:35.491 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:32:35.491 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:32:35.492 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:32:35.492 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:32:35.492 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:32:35.492 +01:00 [DBG] Start discovery request
2020-03-28 18:32:35.568 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:32:35.568 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:32:35.568 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:32:35.568 +01:00 [DBG] Rendering check session result
2020-03-28 18:32:37.525 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:32:37.525 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:32:37.525 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:32:37.526 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:32:37.526 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:32:37.526 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:32:37.526 +01:00 [DBG] Start discovery request
2020-03-28 18:32:37.568 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:32:37.568 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:32:37.569 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:32:37.569 +01:00 [DBG] Rendering check session result
2020-03-28 18:32:42.997 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:32:42.997 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:32:42.997 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:32:42.997 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:32:42.997 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:32:42.997 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:32:42.997 +01:00 [DBG] Start discovery request
2020-03-28 18:32:43.037 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:32:43.039 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:32:43.039 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:32:43.040 +01:00 [DBG] Rendering check session result
2020-03-28 18:33:06.976 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:33:06.976 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:06.977 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:06.977 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:33:06.977 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:33:06.977 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:33:06.977 +01:00 [DBG] Start discovery request
2020-03-28 18:33:07.036 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:33:07.036 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:33:07.037 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:33:07.037 +01:00 [DBG] Rendering check session result
2020-03-28 18:33:12.684 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:33:12.684 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:33:12.685 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:33:12.685 +01:00 [DBG] Start authorize request
2020-03-28 18:33:12.685 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:33:12.685 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:33:12.685 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:12.685 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:33:12.686 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"131939a11ce44303a12ca36c4e727c6b","UiLocales":null,"Nonce":"b41b9bb18674458a913900576ea81008","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_obQYdGBFY5hf_JNNCpuFA","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"131939a11ce44303a12ca36c4e727c6b","nonce":"b41b9bb18674458a913900576ea81008"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:33:12.710 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:33:12.710 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:33:12.710 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:33:12.710 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:33:12.729 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:33:12.730 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:33:12.732 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"131939a11ce44303a12ca36c4e727c6b","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:33:13.746 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:33:13.746 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:13.746 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:13.746 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:33:13.746 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:33:13.746 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:33:13.746 +01:00 [DBG] Start discovery request
2020-03-28 18:33:13.914 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:33:13.914 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:33:13.914 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:33:13.914 +01:00 [DBG] Rendering check session result
2020-03-28 18:33:33.336 +01:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-03-28 18:33:33.336 +01:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-03-28 18:33:33.336 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-03-28 18:33:33.336 +01:00 [DBG] Processing signout request for test2@test.com
2020-03-28 18:33:33.336 +01:00 [DBG] Start end session request validation
2020-03-28 18:33:33.336 +01:00 [DBG] Start identity token validation
2020-03-28 18:33:33.337 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:33.337 +01:00 [DBG] Client found: implicitClient / null
2020-03-28 18:33:33.343 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:33:33.343 +01:00 [DBG] Token validation success
{"ClientId":"implicitClient","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416605,"exp":1585416905,"iss":"https://localhost:44301","aud":"implicitClient","nonce":"df20bdf621b04219a26f37112d63b963","iat":1585416605,"at_hash":"-xIB761h2LQGKkA-WGvmjw","s_hash":"rMcFddND8xvGda_BJ_bmtA","sid":"_obQYdGBFY5hf_JNNCpuFA","sub":"test2@test.com","auth_time":1585416550,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:33:33.343 +01:00 [INF] End session request validation success
{"ClientId":"implicitClient","ClientName":null,"SubjectId":"test2@test.com","PostLogOutUri":"https://localhost:3000/","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"https://localhost:3000/"},"$type":"EndSessionRequestValidationLog"}
2020-03-28 18:33:33.344 +01:00 [DBG] Success validating end session request from implicitClient
2020-03-28 18:33:35.991 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:33:35.991 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:35.991 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:35.991 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:33:35.991 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:33:35.992 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:33:35.992 +01:00 [DBG] Start discovery request
2020-03-28 18:33:36.028 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 18:33:36.028 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 18:33:36.028 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 18:33:36.028 +01:00 [DBG] Start authorize request
2020-03-28 18:33:36.028 +01:00 [DBG] No user present in authorize request
2020-03-28 18:33:36.028 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:33:36.029 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:36.029 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:33:36.029 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e87c9ec172c8476cb406c41d7c0c2366","UiLocales":null,"Nonce":"d3148bdd9e234d8ea288392234bc83c3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e87c9ec172c8476cb406c41d7c0c2366","nonce":"d3148bdd9e234d8ea288392234bc83c3"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:33:36.029 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 18:33:38.975 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:33:38.975 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 18:33:38.975 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 18:33:38.980 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 18:33:38.981 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 18:33:38.981 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 18:33:38.981 +01:00 [DBG] Start authorize callback request
2020-03-28 18:33:38.981 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 18:33:38.981 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 18:33:38.981 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:38.981 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 18:33:38.981 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"e87c9ec172c8476cb406c41d7c0c2366","UiLocales":null,"Nonce":"d3148bdd9e234d8ea288392234bc83c3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"wT2kHeWRSTzZZgMocBwYHQ","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"e87c9ec172c8476cb406c41d7c0c2366","nonce":"d3148bdd9e234d8ea288392234bc83c3"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 18:33:38.987 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 18:33:38.987 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 18:33:38.987 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 18:33:38.987 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 18:33:38.993 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 18:33:38.994 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 18:33:38.995 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"e87c9ec172c8476cb406c41d7c0c2366","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 18:33:38.995 +01:00 [DBG] Augmenting SignInContext
2020-03-28 18:33:40.040 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 18:33:40.040 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:40.040 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:40.041 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 18:33:40.041 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 18:33:40.041 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 18:33:40.041 +01:00 [DBG] Start discovery request
2020-03-28 18:33:40.099 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://localhost:3000
2020-03-28 18:33:40.099 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:40.100 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:40.100 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-03-28 18:33:40.100 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-03-28 18:33:40.100 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-03-28 18:33:40.100 +01:00 [DBG] Start key discovery request
2020-03-28 18:33:40.138 +01:00 [DBG] CORS request made for path: /connect/userinfo from origin: https://localhost:3000
2020-03-28 18:33:40.138 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 18:33:40.138 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 18:33:40.138 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-03-28 18:33:40.138 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-03-28 18:33:40.138 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-03-28 18:33:40.138 +01:00 [DBG] Start userinfo request
2020-03-28 18:33:40.139 +01:00 [DBG] Bearer token found in header
2020-03-28 18:33:40.139 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:40.139 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 18:33:40.142 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-03-28 18:33:40.142 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1585416818,"exp":1585420418,"iss":"https://localhost:44301","aud":"mercuryApi","client_id":"implicitClient","sub":"test2@test.com","auth_time":1585416818,"idp":"local","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"5","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"test2@test.com","Id":"5","scope":["openid","profile","mercuryApi"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-03-28 18:33:40.144 +01:00 [DBG] Creating userinfo response
2020-03-28 18:33:40.144 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:33:40.144 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:33:40.144 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2020-03-28 18:33:40.144 +01:00 [DBG] Scopes in access token: openid profile mercuryApi
2020-03-28 18:33:40.146 +01:00 [INF] Profile service returned the following claim types: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name Id
2020-03-28 18:33:40.146 +01:00 [DBG] End userinfo request
2020-03-28 18:33:40.159 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 18:33:40.159 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 18:33:40.159 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 18:33:40.159 +01:00 [DBG] Rendering check session result
2020-03-28 21:40:41.281 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:40:41.285 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:40:41.285 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:40:41.295 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:40:41.296 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:40:41.296 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:40:41.297 +01:00 [DBG] Start discovery request
2020-03-28 21:40:41.340 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:40:41.340 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:40:41.340 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:40:41.340 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:40:41.340 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:40:41.341 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:40:41.341 +01:00 [DBG] Start discovery request
2020-03-28 21:40:41.372 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:40:41.373 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:40:41.374 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:40:41.374 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:40:41.374 +01:00 [DBG] Rendering check session result
2020-03-28 21:40:41.387 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:40:41.387 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:40:41.388 +01:00 [DBG] Start authorize request
2020-03-28 21:40:41.389 +01:00 [DBG] No user present in authorize request
2020-03-28 21:40:41.389 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:41.391 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:41.397 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:41.401 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"4d8be6348e704e5682f1d8ab9846af1c","UiLocales":null,"Nonce":"7d031eef792141b59cce4e8a3f0e09bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"4d8be6348e704e5682f1d8ab9846af1c","nonce":"7d031eef792141b59cce4e8a3f0e09bc"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:41.402 +01:00 [INF] Showing login: User is not authenticated
2020-03-28 21:40:41.534 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:40:41.535 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:40:41.535 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:40:41.535 +01:00 [DBG] Start authorize request
2020-03-28 21:40:41.535 +01:00 [DBG] No user present in authorize request
2020-03-28 21:40:41.535 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:41.535 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:41.536 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:41.536 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"751c10176b764ff680edc03d92885c70","UiLocales":null,"Nonce":"78d87fdf79f54348899a7e3342cc08d1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"751c10176b764ff680edc03d92885c70","nonce":"78d87fdf79f54348899a7e3342cc08d1","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:41.536 +01:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2020-03-28 21:40:41.536 +01:00 [INF] {"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"751c10176b764ff680edc03d92885c70","UiLocales":null,"Nonce":"78d87fdf79f54348899a7e3342cc08d1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"751c10176b764ff680edc03d92885c70","nonce":"78d87fdf79f54348899a7e3342cc08d1","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:47.804 +01:00 [DBG] Augmenting SignInContext
2020-03-28 21:40:47.804 +01:00 [DBG] Adding idp claim with value: local
2020-03-28 21:40:47.805 +01:00 [DBG] Adding amr claim with value: pwd
2020-03-28 21:40:47.815 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-03-28 21:40:47.815 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-03-28 21:40:47.815 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-03-28 21:40:47.815 +01:00 [DBG] Start authorize callback request
2020-03-28 21:40:47.816 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:40:47.816 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:47.816 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:47.817 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:47.817 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"4d8be6348e704e5682f1d8ab9846af1c","UiLocales":null,"Nonce":"7d031eef792141b59cce4e8a3f0e09bc","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"4d8be6348e704e5682f1d8ab9846af1c","nonce":"7d031eef792141b59cce4e8a3f0e09bc"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:47.821 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:40:47.821 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:40:47.821 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 21:40:47.821 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 21:40:47.829 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:40:47.829 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 21:40:47.831 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"4d8be6348e704e5682f1d8ab9846af1c","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:40:47.831 +01:00 [DBG] Augmenting SignInContext
2020-03-28 21:40:48.938 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:40:48.938 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:40:48.938 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:40:48.939 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:40:48.939 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:40:48.939 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:40:48.939 +01:00 [DBG] Start discovery request
2020-03-28 21:40:49.160 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:40:49.160 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:40:49.161 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:40:49.161 +01:00 [DBG] Rendering check session result
2020-03-28 21:40:49.220 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:40:49.220 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:40:49.220 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:40:49.220 +01:00 [DBG] Start authorize request
2020-03-28 21:40:49.221 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:40:49.221 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:49.221 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:49.221 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:49.221 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"b154dd31b8c94d1d836984836af87eb7","UiLocales":null,"Nonce":"8d72946896e6487c938f107386fac822","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"b154dd31b8c94d1d836984836af87eb7","nonce":"8d72946896e6487c938f107386fac822","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:49.226 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:40:49.226 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:40:49.227 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:40:49.230 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"b154dd31b8c94d1d836984836af87eb7","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:40:50.166 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:40:50.166 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:40:50.166 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:40:50.167 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:40:50.167 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:40:50.167 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:40:50.167 +01:00 [DBG] Start discovery request
2020-03-28 21:40:50.250 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:40:50.251 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:40:50.251 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:40:50.251 +01:00 [DBG] Rendering check session result
2020-03-28 21:40:50.559 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:40:50.559 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:40:50.559 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:40:50.559 +01:00 [DBG] Start authorize request
2020-03-28 21:40:50.559 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:40:50.559 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:50.559 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:50.560 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:50.560 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"03de7fd4bcf44a97b792ac84bcfba071","UiLocales":null,"Nonce":"f6de5b4a2c454c8f83440d8fd08a2aff","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"03de7fd4bcf44a97b792ac84bcfba071","nonce":"f6de5b4a2c454c8f83440d8fd08a2aff","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:50.563 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:40:50.563 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:40:50.563 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:40:50.566 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"03de7fd4bcf44a97b792ac84bcfba071","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:40:51.086 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:40:51.087 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:40:51.087 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:40:51.087 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:40:51.087 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:40:51.087 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:40:51.087 +01:00 [DBG] Start discovery request
2020-03-28 21:40:51.207 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:40:51.208 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:40:51.208 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:40:51.208 +01:00 [DBG] Rendering check session result
2020-03-28 21:40:51.608 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:40:51.608 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:40:51.608 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:40:51.609 +01:00 [DBG] Start authorize request
2020-03-28 21:40:51.609 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:40:51.609 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:40:51.609 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:40:51.609 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:40:51.610 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"15b764b7497342719acb1b13e5554626","UiLocales":null,"Nonce":"0e7b9b582373477bbea32be2cf0842b0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"15b764b7497342719acb1b13e5554626","nonce":"0e7b9b582373477bbea32be2cf0842b0","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:40:51.613 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:40:51.613 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:40:51.613 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:40:51.616 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"15b764b7497342719acb1b13e5554626","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:41:02.818 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:41:02.818 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:41:02.818 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:41:02.818 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:41:02.818 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:41:02.819 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:41:02.819 +01:00 [DBG] Start discovery request
2020-03-28 21:41:02.823 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:41:02.823 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:41:02.823 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:41:02.823 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:41:02.823 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:41:02.823 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:41:02.823 +01:00 [DBG] Start discovery request
2020-03-28 21:41:02.913 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:41:02.919 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:41:02.920 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:41:02.921 +01:00 [DBG] Start authorize request
2020-03-28 21:41:02.921 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:41:02.921 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:41:02.921 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:41:02.922 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:41:02.923 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile mercuryApi","State":"eed4db56b0914b869affa3590dc9bfb7","UiLocales":null,"Nonce":"757d84cdc04848dcabeea1027ff031a4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token token","scope":"openid profile mercuryApi","state":"eed4db56b0914b869affa3590dc9bfb7","nonce":"757d84cdc04848dcabeea1027ff031a4"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:41:02.938 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:41:02.938 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:41:02.938 +01:00 [DBG] Getting claims for access token for client: implicitClient
2020-03-28 21:41:02.938 +01:00 [DBG] Getting claims for access token for subject: test2@test.com
2020-03-28 21:41:02.953 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:41:02.953 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-03-28 21:41:02.961 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:41:02.961 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:41:02.961 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:41:02.961 +01:00 [DBG] Rendering check session result
2020-03-28 21:41:02.962 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"eed4db56b0914b869affa3590dc9bfb7","Scope":"openid profile mercuryApi","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:41:03.601 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:41:03.601 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:41:03.601 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:41:03.601 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:41:03.602 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:41:03.602 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:41:03.602 +01:00 [DBG] Start discovery request
2020-03-28 21:41:03.810 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:41:03.811 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:41:03.811 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:41:03.811 +01:00 [DBG] Rendering check session result
2020-03-28 21:41:04.096 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:41:04.098 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:41:04.098 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:41:04.098 +01:00 [DBG] Start authorize request
2020-03-28 21:41:04.098 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:41:04.098 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:41:04.099 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:41:04.099 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:41:04.099 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"439da914987e4393a8701fed605758cf","UiLocales":null,"Nonce":"54d92ee8dbc0492ea7e8267403dfbc55","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"439da914987e4393a8701fed605758cf","nonce":"54d92ee8dbc0492ea7e8267403dfbc55","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:41:04.118 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:41:04.118 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:41:04.118 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:41:04.122 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"439da914987e4393a8701fed605758cf","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:41:04.509 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:41:04.510 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:41:04.510 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:41:04.513 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:41:04.513 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:41:04.513 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:41:04.513 +01:00 [DBG] Start discovery request
2020-03-28 21:41:04.602 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:41:04.603 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:41:04.603 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:41:04.603 +01:00 [DBG] Rendering check session result
2020-03-28 21:41:04.894 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:41:04.894 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:41:04.894 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:41:04.894 +01:00 [DBG] Start authorize request
2020-03-28 21:41:04.894 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:41:04.894 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:41:04.894 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:41:04.895 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:41:04.895 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"b51ee0f22fa74e328a80ac56133486c8","UiLocales":null,"Nonce":"236659cb987f4a89816336484d5c3d9a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"b51ee0f22fa74e328a80ac56133486c8","nonce":"236659cb987f4a89816336484d5c3d9a","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:41:04.899 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:41:04.899 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:41:04.900 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:41:04.903 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"b51ee0f22fa74e328a80ac56133486c8","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-03-28 21:41:05.477 +01:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://localhost:3000
2020-03-28 21:41:05.477 +01:00 [DBG] Client list checked and origin: https://localhost:3000 is allowed
2020-03-28 21:41:05.477 +01:00 [DBG] CorsPolicyService allowed origin: https://localhost:3000
2020-03-28 21:41:05.477 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-03-28 21:41:05.477 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-03-28 21:41:05.477 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-03-28 21:41:05.477 +01:00 [DBG] Start discovery request
2020-03-28 21:41:05.642 +01:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-03-28 21:41:05.642 +01:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-03-28 21:41:05.642 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-03-28 21:41:05.642 +01:00 [DBG] Rendering check session result
2020-03-28 21:41:06.004 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-03-28 21:41:06.004 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-03-28 21:41:06.004 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-03-28 21:41:06.004 +01:00 [DBG] Start authorize request
2020-03-28 21:41:06.004 +01:00 [DBG] User in authorize request: test2@test.com
2020-03-28 21:41:06.004 +01:00 [DBG] Start authorize request protocol validation
2020-03-28 21:41:06.004 +01:00 [DBG] client configuration validation for client implicitClient succeeded.
2020-03-28 21:41:06.004 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-03-28 21:41:06.004 +01:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"implicitClient","ClientName":null,"RedirectUri":"https://localhost:3000/callback/","AllowedRedirectUris":["https://localhost:3000/callback/"],"SubjectId":"test2@test.com","ResponseType":"id_token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid","State":"a0a3484f49c648c3b5f499c09b61b4dc","UiLocales":null,"Nonce":"235b7d5cab8c4511a93d5adf01d4238f","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"Bv8-CmCWLDMWByxhYI8Oug","Raw":{"client_id":"implicitClient","redirect_uri":"https://localhost:3000/callback/","response_type":"id_token","scope":"openid","state":"a0a3484f49c648c3b5f499c09b61b4dc","nonce":"235b7d5cab8c4511a93d5adf01d4238f","prompt":"none"},"$type":"AuthorizeRequestValidationLog"}
2020-03-28 21:41:06.007 +01:00 [DBG] Client is configured to not require consent, no consent is required
2020-03-28 21:41:06.008 +01:00 [DBG] Creating Implicit Flow response.
2020-03-28 21:41:06.008 +01:00 [DBG] Getting claims for identity token for subject: test2@test.com and client: implicitClient
2020-03-28 21:41:06.011 +01:00 [DBG] Authorize endpoint response
{"SubjectId":"test2@test.com","ClientId":"implicitClient","RedirectUri":"https://localhost:3000/callback/","State":"a0a3484f49c648c3b5f499c09b61b4dc","Scope":"openid","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
